var Qute=function(h){"use strict";var r="default"in h?h.default:h;function o(t){return t[0].toUpperCase()+t.substring(1)}function u(t){var n=t.indexOf("-");if(-1==n)return t;var e=t.substring(0,n),i=n+1;for(n=t.indexOf("-",i);-1<n;)e+=o(t.substring(i,n)),i=n+1,n=t.indexOf("-",i);return i<t.length&&(e+=o(t.substring(i))),e}function v(){v.resolve.apply(null,arguments)}function a(t){t.preventDefault(),t.stopPropagation()}function l(n,e){return e?function(t){return e(t),n(t)}:n}function t(t){for(;t&&!t.__qute__;)t=t.parentNode;return t&&t.__qute__}function c(t,n){var e=Object.keys(t);if(n){var i=n[0];return e.filter(function(t){return-1<n.indexOf(t,1)===i})}return e}v.resolve=function(){throw new Error("Qute Error: "+Array.prototype.slice.call(arguments))};var e={maxNestedLoops:50,queue:[],after:null,push:function(t){if(!this.queue.length){var n=this;r.setTimeout(function(){n.run()},0)}this.queue.push(t)},runAfter:function(t){this.queue.length?this.after?this.after.push(t):this.after=[t]:t()},run:function(){for(var t=this.queue,n=t.length,e=n+this.maxNestedLoops;0<t.length;)t[0](),t.shift(),++n>e&&v(30);if(this.after){for(var i=this.after,s=0,r=i.length;s<r;s++)i[s]();this.after=null}}};function f(t){t&&Object.assign(this,t),this.$topics={lifecycle:[]}}f.prototype={post:function(t,n,e){var i=this.$topics[t];i||v(38,t);for(var s=0,r=i.length;s<r&&!1!==i[s](n,e);s++);},postAsync:function(t,n,e){var i=this;r.setTimeout(function(){i.post(t,n,e)},0)},subscribe:function(t,n){var e=this.$topics[t];return e||(this.$topics[t]=e=[]),e.push(n),this},subscribeOnce:function(e,i,s){var r=this,a=function(t,n){t===i&&(s(t,n),r.unsubscribe(e,a))};return this.subscribe(e,a),a},unsubscribe:function(t,n){var e=this.$topics[t];if(e){var i=e.indexOf(n);-1<i&&e.splice(i,1)}},freeze:function(){Object.freeze(this)}};var d={},i={};function s(t){return i[t]}function p(t,n,e){return(i[t]=n).$compiled=!!e,n.$tag=t,n}function m(t){return d[t]||i[t]}function g(t,n){for(var e=Object.keys(n),i=0,s=e.length;i<s;i++){var r=e[i];n[r]?t.add(r):t.remove(r)}}function $(n,e){return function(t){!1===e.call(n,t)&&a(t)}}function x(t,n){if(n)for(var e in n)n[e]=$(t,n[e]);return n}function b(e,i,s,r){return function(t){var n=r(i);e.getAttribute(s)!==n&&(null==n?e.removeAttribute(s):e.setAttribute(s,n))}}function y(n,e,i){return function(){var t=i(e);n.innerHTML!==t&&(n.innerHTML=t||"")}}function w(e,i,s){return function(){var t=s(i),n=e.style.display;t?"none"===n&&(e.style.display=e.__qute_display||""):"none"!==n&&(null==e.__qute_display&&(e.__qute_display=n),e.style.display="none")}}function _(r,a,o){return function(){for(var t=o(a),n=Object.keys(t),e=0,i=n.length;e<i;e++){var s=n[e];t[s]?r.setAttribute(s,s):r.removeAttribute(s)}}}function A(t,n,e){return function(){!function(t,n){if(n){var e=t.classList;if(Array.isArray(n))for(var i=0,s=n.length;i<s;i++){var r=n[i];r&&("string"==typeof r?e.add(r):g(e,r))}else g(e,n)}}(t,e(n))}}function O(t,n,e){return function(){!function(t,n){if(n){var e=t.style;if(Array.isArray(n))for(var i=0,s=n.length;i<s;i++)Object.assign(e,n[i]);else Object.assign(e,n)}}(t,e(n))}}function C(n,e,i,s){return function(t){n.$set(i,s(e))}}function S(r,a,o){return function(){var t=a.$attrs;if(t)for(var n=c(t,o),e=0,i=n.length;e<i;e++){var s=n[e];r.setAttribute(s,t[s])}}}function j(r,a,o){return function(){var t=a.$attrs;if(t)for(var n=c(t,o),e=0,i=n.length;e<i;e++){var s=n[e];r[s]=t[s]}}}function k(t,n,e,i){return function(){t[e]=i(n)}}function N(r,a,o){return function(){var t=a.$attrs;if(t)for(var n=c(t,o),e=0,i=n.length;e<i;e++){var s=n[e];r.$set(s,t[s])}}}var E={emit:function(t,n){this.$el||v(35),this.$el.dispatchEvent(new r.CustomEvent(t,{bubbles:!0,detail:void 0===n?this:n}))},emitAsync:function(t,n,e){var i=this;r.setTimeout(function(){i.emit(t,n)},e||0)}};function q(t,n){for(var e=0,i=n.length;e<i;e++)t.appendChild(n[e])}function T(t,n,e,i){for(var s in e){var r=e[s];"create"===s?r.call(t,n):t.addEventListener(s,i?r:$(n,r))}}function I(t){if(t&&t.length){for(var n={},e=0,i=!1,s=0,r=t.length;s<r;s++){var a=t[s];switch(a.nodeType){case 1:if("NESTED"===a.nodeName){for(var o=a.getAttribute("name")||"default",u=[],h=a.firstChild;h;)u.push(h),h=h.nextSibling;n[o]=u,e++}else i=!0;break;case 3:a.nodeValue.trim()&&(i=!0)}}if(e)return n;if(i)return n.default=t,n}return null}var n={x:function(t){var n=t(this.vm),e=h.document.createTextNode(n);return this.up(function(n,e,i){return function(){var t=i(e);t!==n.nodeValue&&(n.nodeValue=t)}}(e,this.vm,t)),e},t:function(t){return h.document.createTextNode(t)},g:function(t,n,e){var i=t(this.vm),s=m(i);return s?this.v(s,n,e):this.h(i,n,e)},h:function(t,n,e){var i=h.document.createElement(t);if(n){var s=this.vm;for(var r in n){var a=null,o=n[r];36===r.charCodeAt(0)?"$on"===r?T(i,s,o):"$class"===r?a=A(i,s,o):"$style"===r?a=O(i,s,o):"$show"===r?a=w(i,s,o):"$toggle"===r?a=_(i,s,o):"$html"===r?a=y(i,s,o):"$attrs"===r?a=S(i,s,o):"$listeners"===r?T(i,s,s.$listeners,!0):"$channel"===r?v(28,t):v(26,r):"function"==typeof o?a=b(i,s,r,o):i.setAttribute(r,o),a&&this.up(a)()}}return e&&q(i,e),i},hh:function(t,n,e,i){var s=this.h(t,n);if(i){var r=f.Qute.converters[i];r||v(27,i),e=r(e,this)}return s.innerHTML=e,s},r:function(t,n,e){var i=m(t);return i||v(23,t),this._v(i,n,I(e))},v:function(t,n,e){return this._v(t,n,I(e))},_v:function(t,n,e){if(function(t){return t&&t.prototype&&t.prototype.__VM__}(t))return new t(this.vm.$ctx).$create(this,n,e);if(t.$compiled){var i=this.vm;this.vm=this.functx(this.vm,n,e);var s=t(this,n,e);if(this.vm.$el=s,this.vm.$bindings)for(var r=this.vm.$bindings,a=0,o=r.length;a<o;a+=2){var u=r[a](s,i,r[a+1]);this.up(u)()}return this.vm.$listeners&&T(s,this.vm,this.vm.$listeners,!0),this.vm=i,s}return t(this,n,e)},s:function(t,n){var e=this.vm.$slots,i=e&&e[t||"default"]||n;if(i){var s=h.document.createDocumentFragment();return q(s,i),s}return h.document.createComment("[slot/]")},w:function(t,n,e,i,s){var r=h.document.createComment("[view/]"),a=h.document.createDocumentFragment();a.appendChild(r);var o=function(r,a,o,u,t,h,l){var c=t?null:{},f=null,d=null;return function(t,n){var e,i=o(r);if(i!==d){var s=a.parentNode;f&&(f.$disconnect(),s.removeChild(a.previousSibling)),i?((f=c&&c[i])||(f=new L(r),c&&(c[i]=f)),e=f.r(i,h,l(f)),s.insertBefore(e,a),f.$connect()):f=null,u&&!n&&u.call(r,e&&e.__qute__),d=i}else f&&f.$update()}}(this.vm,r,t,n,e,i,s);return(r.__qute__=o)(null,!0),this.up(o),a},i:function(t,n,e,i){var s=h.document.createComment("[if]"),r=h.document.createComment("[/if]"),a=h.document.createDocumentFragment();a.appendChild(s),a.appendChild(r);var o=function(o,u,h,l,c,f,d){var p=null,v=void 0;return function(t,n){var e=!!l(o);if(e!==v){p&&p.$disconnect();for(var i=u.parentNode;u.nextSibling&&u.nextSibling!==h;)i.removeChild(u.nextSibling);p=new L(o);for(var s=(v=e)?f(p):d?d(p):[],r=0,a=s.length;r<a;r++)i.insertBefore(s[r],h);p.$connect(),c&&!n&&c.call(o,v)}else p&&p.$update()}}(this.vm,s,r,t,n,e,i);return(s.__qute__=o)(null,!0),this.up(o),a},l:function(t,n){var e=t(this.vm);return e.$createListFragment||v(24),e.$createListFragment(this,n)},a:function(t,n){var e=h.document.createComment("[for]"),i=h.document.createComment("[/for]"),s=h.document.createDocumentFragment();s.appendChild(e),s.appendChild(i);var r=function(u,h,l,c,f){var d=null,p=null;return function(t){var n=c(u);if(n!==p){d&&d.$disconnect();for(var e=h.parentNode;h.nextSibling&&h.nextSibling!==l;)e.removeChild(h.nextSibling);if(d=new L(u),(p=n)&&(Array.isArray(p)||(p.$createListFragment&&v(25),p=Object.keys(p)),0<p.length)){for(var i=p.length-1,s=0;s<i;s++)if(o=f(p[s],s,!0))for(var r=0,a=o.length;r<a;r++)e.insertBefore(o[r],l);var o;if(o=f(p[s],s,!1))for(s=0,i=o.length;s<i;s++)e.insertBefore(o[s],l)}d.$connect()}else d&&d.$update()}}(this.vm,e,i,t,n);return(e.__qute__=r)(null),this.up(r),s},up:function(t){return this.ups.push(t),t},eval:function(t){return"function"==typeof t?t(this.vm):t},$connect:function(){if(!this.isc){for(var t=this.vms,n=0,e=t.length;n<e;n++)t[n].$connect();this.isc=!0}return this},$disconnect:function(){if(this.isc){for(var t=this.vms,n=0,e=t.length;n<e;n++)t[n].$disconnect();this.isc=!1}return this},$push:function(t){this.vms.push(t),this.isc&&t.$connect()},$update:function(){for(var t=this.vm,n=this.ups,e=0,i=n.length;e<i;e++)n[e](t);return this},functx:function(t,n,e){var i={},s={$parent:t,$attrs:i,$listeners:null,$slots:e,$el:null,$bindings:null,emit:E.emit,emitAsync:E.emitAsync},r=null;if(n)for(var a in n){var o=n[a];36!==a.charCodeAt(0)||"$html"===a?"function"==typeof o?this.up(k(i,t,a,o))():i[a]=o:"$attrs"===a?t.$attrs&&this.up(j(i,t,o))():"$on"===a?s.$listeners=x(t,o):"$class"===a?(r||(r=[]),r.push(A,o)):"$style"===a?(r||(r=[]),r.push(O,o)):"$show"===a?(r||(r=[]),r.push(w,o)):"$toggle"===a&&(r||(r=[]),r.push(_,o))}return s.$bindings=r,s}};function L(t){this.vm=t,this.ups=[],this.vms=[],this.isc=!1}function B(t,s){this.start=h.document.createComment("[list]"),this.end=h.document.createComment("[/list]"),this.r=t,this.listFn=s,this.length=0,this.updateChildren=function(t){var n=this.start.nextSibling;if(n&&n!==this.end&&n.$up)for(var e=n,i=this.end;e&&e!==i;){if(e.$up)for(var s=e.$up,r=0,a=s.length;r<a;r++)s[r](t);e=e.nextSibling}},this.clear=function(){for(var t=this.start,n=this.end,e=t.parentNode;t.nextSibling&&t.nextSibling!==n;)e.removeChild(t.nextSibling);t.nextSibling||v(10),this.length=0},this.get=function(t){if(t<0||t>this.length)return null;var n=this.length,e=null;if(t<n/2)for(e=this.start.nextSibling;0<t--;)e=e.nextSibling;else for(t=n-t-1,e=this.end.previousSibling;0<t--;)e=e.previousSibling;return e},this.getInsertion=function(t){return(t<0||t>this.length)&&v(11,t,length),0===t?this.start.nextSibling:t===this.length?this.end:this.get(t)},this.createItem=function(t,n,e,i){return s(t,n,e,i)},this.insert=function(t,n,e){if(n||(n=0),e||(e=t.length-n),!(e<1)){var i=n+e,s=(this.listFn,this.r),r=this.getInsertion(n);r||v(12,index,this.length);for(var a,o=s.vm,u=r.parentNode,h=i-1,l=n;l<h;l++){var c;a=new L(o),(c=this.createItem(a,t[l],l,!0))&&(u.insertBefore(c,r),s.$push(a),c.__qute_ctx__=a)}a=new L(o),(c=this.createItem(a,t[h],h,i<t.length))&&(u.insertBefore(c,r),s.$push(a),c.__qute_ctx__=a),this.length=t.length}},this.remove=function(t,n){if(!(t+n>this.length)){var e=this.get(t);e||v(13,t,this.length);var i=0,s=this.start.parentNode;for(e=e.previousSibling;i++<n;){var r=e.nextSibling;r.__qute_ctx__&&r.__qute_ctx__.$disconnect(),s.removeChild(r)}this.length-=n}},this.move=function(t,n){var e=this.get(t);e||v(14,t,this.length);var i=this.get(n);i||v(15,n,this.length),(i=i.nextSibling)?i.parentNode.insertBefore(e,i):i.parentNode.append(e)}}L.prototype=n;var F=Array.prototype,P={$createListFragment:function(t,n){var e=new L(t.vm);this.lfs||(this.lfs=[]);var i=new B(e,n),s=h.document.createDocumentFragment();return s.appendChild(i.start),s.appendChild(i.end),i.insert(this.$data),t.up(i.updateChildren.bind(i)),this.lfs.push(i),t.$push(e),s},$updateNow:function(){if(this.lfs)for(var t=this.ops,n=this.$data,e=this.lfs,i=e.length;t.length;){var s=t.shift(),r=0;for(i=e.length;r<i;r++)s(e[r],n)}},$update:function(t){if(this.lfs&&1===this.ops.push(t)){var n=this;e.push(function(){n.$updateNow()})}},$redraw:function(){this.$update(function(t,n){t.clear(),t.insert(n)})},$insert:function(e,i){this.$update(function(t,n){t.insert(n,e,i)})},$remove:function(e,i){this.$update(function(t,n){t.remove(e,i)})},$move:function(e,i){this.$update(function(t,n){t.move(e,i)})},toJSON:function(){return this.$data},data:function(){return this.$data},newList:function(){return new M(this.$data)},clear:function(){this.replace([])},replace:function(t){this.$data=t,this.$redraw()},move:function(t,n){this.$data.splice(n,0,this.$data.splice(t,1)[0]),this.$move(t,n)},remove:function(t){var n=this.$data.indexOf(t);if(-1<n)return this.splice(n,1)},push:function(){var t=this.$data.length,n=F.push.apply(this.$data,arguments);return this.$insert(t,arguments.length),n},unshift:function(){this.$data.length;var t=F.unshift.apply(this.$data,arguments);return this.$insert(0,arguments.length),t},pop:function(){var t=F.pop.apply(this.$data,arguments);return this.$remove(this.$data.length,1),t},shift:function(){var t=F.shift.apply(this.$data,arguments);return this.$remove(0,1),t},splice:function(t,n){var e=arguments.length,i=this.$data.length,s=F.splice.apply(this.$data,arguments);return 1===e?this.$remove(t,i-t):2===e?this.$remove(t,n):(n&&this.$remove(t,n),this.$insert(t,e-2)),s},sort:function(t){return this.$data.sort(t),this.$redraw(),this.$data},reverse:function(){return this.$data.reverse(),this.$redraw(),this.$data},get:function(t){return this.$data[t]},slice:function(){return F.slice.apply(this.$data,arguments)},forEach:function(t,n){this.$data.forEach(t,n)},map:function(t,n){return this.$data.map(t,n)},filter:function(t,n){return this.$data.filter(t,n)},find:function(t,n){return this.$data.find(t,n)},findIndex:function(t,n){return this.$data.findIndex(t,n)},reduce:function(t,n){return this.$data.reduce(t,n)},reduceRight:function(t,n){return this.$data.reduceRight(t,n)},indexOf:function(t,n){return this.$data.indexOf(t,n||0)},lastIndexOf:function(t,n){return this.$data.lastIndexOf(t,n||this.$data.length-1)}};function M(t){this.ops=[],this.lfs=null,this.$data=t||[]}function z(t){return 95!==t.charCodeAt(0)}function V(i){return{get:function(){return this.$data[i]},set:function(t){var n=this.$data[i];if(n!==t){this.$data[i]=t;var e=this.$el&&this.$watch&&this.$watch[i];if(e&&!1===e.call(this,t,n))return;this.update(i)}},enumerable:z(i)}}function Z(i){return{get:function(){return this.$data[i]},set:function(t){var n=this.$data[i];if(n!==t){t?Array.isArray(t)?this.$data[i].replace(t):t instanceof M?(n&&n.$disconnect(),this.$data[i]=t):v(31,t):this.$data[i].clear();var e=this.$watch&&this.$watch[i];if(e&&!1===e.call(this,t,n))return;this.update(i)}},enumerable:z(i)}}function D(t,i){var n={value:{}};Object.defineProperty(this,"$attrs",n),n.value=t instanceof f?t:new f(t),Object.defineProperty(this,"$ctx",n),n.value=null,n.writable=!0,Object.defineProperty(this,"$r",n),Object.defineProperty(this,"$listeners",n),Object.defineProperty(this,"$slots",n),Object.defineProperty(this,"$el",n),Object.defineProperty(this,"$clean",n),n.value=0,Object.defineProperty(this,"$st",n);var e=this.init(t)||{};if(n.value=e,Object.defineProperty(this,"$data",n),e)for(var s in e)Object.defineProperty(this,s,e[s]instanceof M?Z(s):V(s));if(this.render||v(32),i){var r=this.$data,a=this.$attrs;Object.keys(i).forEach(function(t){var n=i[t];if(t in r)r[t]=n;else{var e=u(t);e!==t&&e in r?r[e]=n:a[t]!==n&&(a[t]=n)}})}}function R(t,n,e){function i(t,n){D.call(this,t,n)}var s,r;if(t||v(5),"function"==typeof n){if(!(n.prototype instanceof D))return p(t,n);r=(s=n).prototype}else e||(e=D),r=Object.create(e.prototype,{constructor:{value:i}}),n&&function(t,n){for(var e=Object.keys(n),i=0,s=e.length;i<s;i++){var r=e[i];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}}(r,n),r.$super=e.prototype,i.prototype=r,s=i;return r.render||(r.render=R.template(t),r.render||v(36,t)),function(t,n){d[t]=n}(r.$tag=t,s),s.watch=function(t,n){return r.$watch||Object.defineProperty(r,"$watch",{value:{}}),r.$watch[t]=n,s},s.on=function(n,e,i){return r.$init=l(function(t){t.$on(n,e,i)},r.$init),s},s.channel=function(t){return r.$channel=t,this},s}Object.defineProperty(P,"length",{get:function(){return this.$data.length}}),M.prototype=P,D.prototype={__VM__:!0,toString:function(){return"ViewModel <"+this.$tag+"/>"},$set:function(t,n){if(t in this.$data)this[t]=n;else{var e=u(t);e!==t&&e in this.$data?this[e]=n:this.$attrs[t]!==n&&(this.$attrs[t]=n,this.update())}},listen:function(n){return this.$channel||v(39,this.$tag),this.$init=l(function(t){t.subscribe(n,t.$channel)},this.$init),this},setup:function(t){return this.$init=l(t,this.$init),this},cleanup:function(t){return this.$clean=l(t,this.$clean),this},$parent:function(){return this.$el||v(35),t(this.$el.parentNode)},$root:function(){var t=this.$parent();return t?t.$root():this},$connect:function(){if(!(1&this.$st)){if(this.$st|=1,this.$init&&this.$init(this),this.$listeners){var t=this.$listeners;for(var n in t)this.$on(n,t[n])}return this.$r.$connect(),this.connected&&this.connected(),this}},$disconnect:function(){1&this.$st&&(this.$st^=1,this.$clean&&(this.$clean(),this.$clean=null),this.$r.$disconnect(),this.disconnected&&this.disconnected())},$load:function(t,n,e){var i=null,s=t.vm;if(this.$slots=e,n)for(var r in n){var a=n[r];36===r.charCodeAt(0)?"$on"===r?this.$listeners=x(s,a):"$attrs"===r?t.up(N(this,s,a))():"$class"===r?(i||(i=[]),i.push(A,a)):"$style"===r?(i||(i=[]),i.push(O,a)):"$show"===r?(i||(i=[]),i.push(w,a)):"$toggle"===r?(i||(i=[]),i.push(_,a)):"$channel"===r?this.listen(a):v(26,r):"function"==typeof a?t.up(C(this,s,r,a))():this.$set(r,a)}return i},$create:function(t,n,e){var i=t&&this.$load(t,n,e),s=new L(this),r=this.render(s)||h.document.createComment("<"+this.$tag+"/>");if(this.$r=s,(r.__qute__=this).$el=r,i)for(var a=0,o=i.length;a<o;a+=2){i[a];var u=i[a](r,t.vm,i[a+1]);t.up(u)()}return this.created&&this.created(r),t&&t.$push(this),r},mount:function(t,n){var e;this.$el&&v(33),e=t?"string"==typeof t?h.document.getElementById(t):t:h.document.body;var i=this.$create();return n?e.parentNode.insertBefore(i,e):e.appendChild(i),this.$connect(),this},unmount:function(){this.$el||v(34),this.$disconnect(),this.$el.parentNode.removeChild(this.$el)},$update:function(t){this.$el&&this.$r.$update()},update:function(t){if(1===this.$st){this.$st|=2;var n=this;e.push(function(){n.$update(t),n.$st^=2})}},$on:function(t){var n,e;if(this.$el||v(34),3===arguments.length){if(n=arguments[1],!(e=arguments[2])&&(e=n,n=null,!e))throw new Error("on function requires a callback argument")}else{if(2!==arguments.length)throw new Error("on function takes 2 or 3 arguments: eventType[, seelctor], callback");e=arguments[1]}function i(t){n&&!t.target.matches(n)||!1===e.call(s,t)&&a(t)}var s=this;this.$el.addEventListener(t,i),this.cleanup(function(){s.$el.removeEventListener(t,i)})},emit:E.emit,emitAsync:E.emitAsync,post:function(t,n,e){this.$ctx.post(t,n,e)},postAsync:function(t,n,e){this.$ctx.postAsync(t,n,e)},subscribe:function(t,n){var e=this.$ctx;return e.subscribe(t,n.bind(this)),this.cleanup(function(){e.unsubscribe(t,n)}),this},subscribeOnce:function(t,n,e){var i=this.$ctx,s=i.subscribeOnce(t,n,e.bind(this));return this.cleanup(function(){i.unsubscribe(t,s)}),this},toHTML:function(){return this.$el&&this.$el.outerHTML},init:function(){}},R.List=M,R.ViewModel=D,R.link=function(t,n){t.prototype.render=n};var U=null;function Q(t){if(t&&(t=t.trim())){var n=-1<t.indexOf(",")?/\s*,\s*/:/\s+/;return H(t.split(n))}}function H(t){return t.reduce(function(t,n){return t[n]=!0,t},{})}function X(t){throw new Error(t)}R.css=function(t){var n=r.document;if(!U){var e=n.getElementById("--qute-inline-styles");e||((e=n.createElement("STYLE")).id="--qute-inline-styles",e.type="text/css",e.textContent="\n",n.head.insertBefore(e,n.head.firstChild)),U=e}U.textContent+=t},R.converters={},(f.Qute=R).Context=f,R.UpdateQueue=e,R.Rendering=L,R.render=function(t,n){return s(t)(new L(n))},R.register=p,R.template=s,R.snapshotRegistry=function(){return{VMS:Object.assign({},d),XTAGS:Object.assign({},i)}},R.restoreRegistry=function(t){d=t.VMS,i=t.XTAGS},R.vm=function(t){return d[t]},R.vmOrTemplate=m,R.runAfter=function(t){e.runAfter(t)},R.closest=t,R.ERR=v;var W=/^<([-A-Za-z0-9_:]+)((?:\s+[-\w@#:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:\{[^}]*\})|[^>\s]+))?)*)\s*(\/?)>/,J=/^<\/([-A-Za-z0-9_:]+)[^>]*>/,G=/([-A-Za-z0-9_@#:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|[^}])*)\})|([^>\s]+)))?/g,Y={else:!0,case:!0,area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};var K=/(?:^|\n)\s*<(?:(x-tag)|(x-style))(\s+[^>]*)?>/,tt=/\s*<\/(?:(x-tag)|(x-style))\s*>/,nt=/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,et=/\n/g;function it(t){return t[1]?"x-tag":t[2]?"x-style":void X("Bug?")}function st(t){var n={};nt.lastIndex=0;for(var e=nt.exec(t);e;)n[e[1]]=null!=e[2]?e[2]:null!=e[3]?e[3]:null==e[4]||e[4],e=nt.exec(t);return n}function rt(t){var n=t.match(et);return n?n.join(""):""}function at(t,n){for(var e=K.exec(t);e;){var i=rt(e[0]),s=t.substring(0,e.index);s&&n.text(s+i),t=t.substring(e.index+e[0].length);var r=it(e),a=e[3];a&&(a=a.trim()),(e=tt.exec(t))||X("Invalid qute file: No closing </"+r+"> found.");var o=it(e);o!==r&&X("Invalid qute file: Found closing tag '"+o+"'. Expecting '"+r+"'"),s=t.substring(0,e.index),n.tag(r,a?st(a):null,s),t=t.substring(e.index+e[0].length),e=K.exec(t)}t&&n.text(t)}function ot(i,t,s){var r="";return at(t,{tag:function(t,n,e){e&&("x-tag"===t?r+=function(t,n,e){n&&n.name||X("x-tag attribute 'name' is required");var i=n.name,s=n.import||null;return'Qute.register("'+i+'", '+t.compile(e,Q(s))+", true);\n"}(i,n,e):"x-style"===t?r+=function(t,n,e){return"Qute.css("+JSON.stringify(e.trim())+");\n"}(0,0,e):X("Unsupported tag: '"+t+"'"),s&&s.removeNewLines||(r+=rt(e)))},text:function(t){t&&(r+=t)}}),r}var ut=/^[a-zA-Z_\$][0-9a-zA-Z_\$]*$/,ht=/((?:'(?:\\.|[^'])*')|(?:"(?:\\.|[^"])*"))|([a-zA-Z_\$][0-9a-zA-Z_\$\.]*)/g,lt=/((?:'(?:\\.|[^'])*')|(?:"(?:\\.|[^"])*")|(?:[\{,]\s*[a-zA-Z_\$][0-9a-zA-Z_\$\.]*\s*\:))|([a-zA-Z_\$][0-9a-zA-Z_\$\.]*)/g,ct=/^(\(?)\s*((?:[a-zA-Z_$][a-zA-Z_$0-9]*)(?:\s*,\s*[a-zA-Z_$][a-zA-Z_$0-9]*)*)(\)?)\s*=>\s*(.*)$/,ft=H("nested html head meta link title base body style nav header footer main aside article section h1 h2 h3 h4 h5 h6 div p pre blockquote hr ul ol li dl dt dd span a em strong b i u s del ins mark small sup sub dfn code var samp kbd q cite ruby rt rp br wbr bdo bdi table caption tr td th thead tfoot tbody colgroup col img figure figcaption map area video audio source track script noscript object param embed iframe canvas abbr address meter progress time form button input textarea select option optgroup label fieldset legend datalist menu output details summary command keygen acronym applet bgsound basefont big center dir font frame frameset noframes strike tt xmp template".split(" "));function dt(t){return JSON.stringify(t)}function pt(t){var n=t.indexOf(".");return 0<n?t.substring(0,n):t}function vt(t,i){return t.replace(ht,function(t,n,e){return e?"this"===e?"m":e.startsWith("this.")?"m"+e.substring(4):i.symbols[pt(t)]?t:"m."+e:t})}function mt(t,n){return"("+vt(t,n)+")"}function gt(t,n){if(null==t)return"null";var e=t.charAt(0);return("{"===e||"["===e?function(t,i){return"("+t.replace(lt,function(t,n,e){return e?"this"===e?"m":e.startsWith("this.")?"m"+e.substring(4):i.symbols[pt(t)]?t:"m."+e:t})+")"}:mt)(t,n)}function $t(t){return"function(m){return "+t+"}"}function xt(t){return"function($){return "+t+"}"}function bt(t,n){if(ut.test(t))return n.imports[t]?"function($1){return "+t+".call(this, $1)}":"function($1){return this."+t+"($1)}";var e=function(t,n){var e=ct.exec(t);if(e){var i=e[1],s=e[2].trim(),r=e[3],a=e[4].trim();!!i!=!!r&&X("Invalid arrow function syntax: "+t),a||X("Invalid arrow function syntax: "+t);var o=a.charCodeAt(0),u=a.charCodeAt(a.length-1);123===o?125!==u&&X("Invalid arrow function syntax: "+t):125===u?X("Invalid arrow function syntax: "+t):a="{"+a+";}";var h=n.symbols,l=Object.assign({},h);s.split(/\s*,\s*/).forEach(function(t){l[t]=!0}),n.symbols=l;var c="(function("+s+")"+vt(a,n)+")($1,m)";return n.symbols=h,c}return null}(t,n);return e?"function($1){var m=this;"+e+"}":"function($1){var m=this;"+mt(t,n)+"}"}function yt(t){var n="$."+t+"(";return 1<arguments.length&&(n+=Array.prototype.slice.call(arguments,1).join(",")),n+")"}function wt(t,n){return t&&t.length?"["+t.map(function(t){return t.compile(n)}).join(",")+"]":"null"}function _t(t,n,e,i,s,r){var a=null;if(t)for(var o in a=[],t)a.push(dt(o)+":"+dt(t[o]));if(n)for(var o in a||(a=[]),n)a.push(dt(o)+":"+$t(gt(n[o],r)));if(e)for(var o in a||(a=[]),e){var u;u="$attrs"===o||"$listeners"===o?e[o]:$t(gt(e[o],r)),a.push(dt(o)+":"+u)}if(i)for(var o in a||(a=[]),i)a.push(dt(o)+":"+i[o]);if(s){a||(a=[]);var h=function(t,n){var e=[];for(var i in t)e.push(dt(i)+":"+bt(t[i],n));return e.length?"{"+e.join(",")+"}":null}(s,r);h&&a.push('"$on":'+h)}return a&&a.length?"{"+a.join(",")+"}":"null"}function At(t){return!0===t.value?t.name:t.value}function Ot(){this.name="root",this.children=[],this.append=function(t){this.children.push(t)},this.lastChild=function(){return this.children[this.children.length-1]},this.compile=function(t){return 1!==this.children.length&&X("the root node must have a single children element"),this.children[0].compile(t)},this.trim=function(){var t=this.children;if(1<t.length){var n=t[0];n instanceof jt&&n.isBlank&&t.shift(),(n=t[t.length-1])instanceof jt&&n.isBlank&&n.pop()}return this}}function Ct(t,n){function u(t){if(!0===t)return"null";var n,e=!0;return 33===t.charCodeAt(0)&&(t=t.substring(1),e=!1),(n=-1<(t=t.trim()).indexOf(",")?t.split(/\s*,\s*/):t.split(/\s+/)).unshift(e),dt(n)}return this.name=t,this.attrs=null,this.bindings=null,this.xattrs=null,this.directives=null,this.events=null,this.children=[],this.attr=function(t,n){this.attrs||(this.attrs={}),this.attrs[t]=n},this.bind=function(t,n){(this.bindings||(this.bindings={}))[t]=n.trim()},this.xattr=function(t,n){this.xattrs||(this.xattrs={}),this.xattrs[t]=n.trim()},this.directive=function(t,n){this.directives||(this.directives={}),this.directives[t]=n},this.on=function(t,n){(this.events||(this.events={}))[t]=n.trim()},this.append=function(t){this.children.push(t)},this.compile=function(t){if("tag"===this.name){(e=this.attrs)&&e.is||X("<tag> requires an 'is' attribute");var n=e.is;return delete e.is,yt("g",$t(mt(n,t)),_t(this.attrs,this.bindings,this.xattrs,this.directives,this.events,t),wt(this.children,t))}if("view"===this.name){var e;(e=this.attrs)&&e.is||X("<view> requires an 'is' attribute");var i=$t(mt(e.is,t));delete e.is;var s="false";"x-nocache"in e&&(delete e["x-nocache"],s="true");var r="null";return"x-change"in e&&(r=bt(e["x-change"],t),delete e["x-change"]),yt("w",i,r,s,_t(this.attrs,this.bindings,this.xattrs,this.directives,this.events,t),xt(wt(this.children,t)))}var a,o;this.name in ft?(a="h",o=dt(this.name)):(o=t.resolve(this.name))?a="v":(a="r",o=dt(this.name));return"pre"===this.name&&((t=t.push()).pre=!0),yt(a,o,_t(this.attrs,this.bindings,this.xattrs,this.directives,this.events,t),wt(this.children,t))},this.xcontent=function(t,n){return!0===n.value?new St(this,t):(this.xattr("$html",n.value),this)},this.parseAttrs=function(t){for(var n=this,e=0,i=t.length;e<i;e++){var s=t[e],r=s.name,a=r[0];if(":"===a)this.bind(r.substring(1),s.value);else if("@"===a)this.on(r.substring(1),s.value);else if("x-for"===r)n=new qt(s.value,this);else if("x-attrs"===r)this.xattr("$attrs",u(s.value));else if("x-listeners"===r)this.xattr("$listeners",u(s.value));else if("x-channel"===r)this.attr("$channel",s.value);else if("x-show"===r)this.xattr("$show",s.value);else if("x-class"===r)this.xattr("$class",s.value);else if("x-style"===r)this.xattr("$style",s.value);else if("x-toggle"===r)this.xattr("$toggle",s.value);else if("x-html"===r)!0===s.value?n=new St(this,null):this.xattr("$html",s.value);else if("x-markdown"===r)n=new St(this,"markdown");else if(r.startsWith("x-content-")){var o=r.substring("x-content-".length);n=new St(this,"html"!==o?o:null)}else s.expr?this.bind(r,s.value):r.startsWith("x-bind:")?this.bind(r.substring(7),s.value):r.startsWith("x-on:")?this.on(r.substring(5),s.value):this.attr(r,At(s))}return n},this.parseAttrs(n)}function St(t,n){this.node=t,this.compile=function(t){return yt("hh",dt(this.node.name),_t(this.node.attrs,this.node.bindings,this.node.xattrs,this.node.directives,this.node.events,t),dt(this.html.join("")),dt(n))},this.tag=t.name,this.stack=[],this.html=[],this.start=function(t,n,e){var i=this.html;i.push("<",t);for(var s=0,r=n.length;s<r;s++){var a=n[s];i.push(" ",a.name),!0!==a.value&&i.push('="',a.value,'"')}i.push(e?"/>":">"),e||this.stack.push(t)},this.end=function(t){var n=this.stack.pop();if(!n)return!0;n!==t&&X("Closing tag '"+t+"' doesn't match the start tag '"+n+"'"),this.html.push("</",t,">")},this.text=function(t){this.html.push(t)}}function jt(t){this.value=t,this.isBlank=0===t.trim().length,this.compile=function(t){return yt("t",dt(this.isBlank&&!t.pre?this.value.trim()+" ":this.value))},this.append=function(t){this.value+=t,this.isBlank&&(this.isBlank=0===this.value.trim().length)}}function kt(){this.parts=[],this.text=function(t){this.parts.push(!1,t)},this.expr=function(t){this.parts.push(!0,t)},this.compile=function(t){for(var n=this.parts,e=[],i=0,s=n.length;i<s;i+=2)n[i]?e.push(mt(n[i+1],t)):e.push(dt(n[i+1]));return yt("x",$t(e.join("+")))}}var Nt=/^\s*(.+)\s+in\s+(.+)\s*$/;function Et(t,n){var e=Nt.exec(n);e||X("Invalid for expression"),t.list=e[2].trim();var i=e[1].trim();if(-1<i.indexOf(",")){var s=i.split(/\s*,\s*/);t.item=s[0],t.index=s[1],2<s.length&&(t.hasNext=s[2])}else t.item=i}function qt(t,n){this.node=n,this.list=null,this.item=null,this.index="_",this.hasNext="__",Et(this,t),this.append=function(t){this.node.append(t)},this.compile=function(t){var n=t.push(),e=n.symbols;e[this.item]=!0,e[this.index]=!0,e[this.hasNext]=!0;var i=function(t,n){return t?t.compile(n):"null"}(this.node,n),s="function($,"+this.item+","+this.index+","+this.hasNext+"){return "+i+"}";return yt("l",$t(mt(this.list,t)),s)}}function Tt(){}var It=/\{\{([^\}]+)\}\}/g,Lt={if:function(t,n){this.children=[],this._else=null,this.change=null,this.expr=null;var e=n[0];if(2===n.length){var i=n[1];"x-change"===e.name?(i=e,e=n[1]):"x-change"!==i.name&&X("Invalid if attribute '"+i.name+"'. You may want to use x-change?"),this.change=i.value}else 1!==n.length&&X("if has only one required attribute: value='expr' and an optional one: x-change='onChangeHandler'");this.expr=At(e),this.append=function(t){t instanceof Tt?this._else=[]:this._else?this._else.push(t):this.children.push(t)},this.compile=function(t){var n=this.change?bt(this.change,t):"null";return this._else?yt("i",$t(mt(this.expr,t)),n,xt(wt(this.children,t)),xt(wt(this._else,t))):yt("i",$t(mt(this.expr,t)),n,xt(wt(this.children,t)))}},else:Tt,for:function(t,n){this.list=null,this.item=null,this.index="_",this.hasNext="__",this.children=[],this.append=function(t){this.children.push(t)},this.lastChild=function(){return this.children[this.children.length-1]},this.compile=function(t){var n=t.push(),e=n.symbols;e[this.item]=!0,e[this.index]=!0,e[this.hasNext]=!0;var i=wt(this.children,n),s="function("+this.item+","+this.index+","+this.hasNext+"){return "+i+"}";return yt("a",$t(mt(this.list,t)),s)},1!==n.length&&X("For directive take exatcly one attribute"),Et(this,n[0].value)},slot:function(t,n){this.name=t,this.children=[],this.append=function(t){this.children.push(t)},this.lastChild=function(){return this.children[this.children.length-1]},this.process=function(t){return t.processSlot(this)},this.compile=function(t){return yt("s",dt(this.slotName),wt(this.children,t))},1<n.length&&X("slot node take zero or one 'name' parameter"),this.slotName=n.length?At(n[0]):null}},Bt={true:!0,false:!0,undefined:!0,null:!0,$1:!0,this:!0,JSON:!0,Object:!0,console:!0,window:!0,$:!0};function Ft(){function r(t,n,e,i){this.pre=i,this.resolve=e,this.symbols=t,this.imports=n,this.push=function(){return new r(Object.assign({},this.symbols),this.imports,this.resolve,this.pre)}}this.collector=null,this.top=null,this.stack=[],this.lastText=null,this.resolve=function(t){return null},this.pushText=function(t){if(this.lastText)this.lastText.append(t);else{var n=new jt(t);this.push(n,!0),this.lastText=n}},this.push=function(t,n){this.lastText=null,this.top.append(t),n||(this.stack.push(this.top),this.top=t)},this.pop=function(){this.lastText=null;var t=this.top;return this.top=this.stack.pop(),t},this.text=function(t){if(this.collector)this.collector.text(t);else{var n=t.indexOf("{{"),e=0;if(-1<n){It.lastIndex=n;var i=It.exec(t);if(i){var s=new kt;do{var r=i.index;e<r&&s.text(t.substring(e,r)),s.expr(i[1]),e=It.lastIndex,i=It.exec(t)}while(i);return e<t.length&&s.text(t.substring(e)),void this.push(s,!0)}}this.pushText(t)}},this.start=function(t,n,e){if(this.collector)this.collector.start(t,n,e);else{var i,s=Lt[t];s?i=new s(t,n,e):(i=new Ct(t,n,e))instanceof St&&(this.collector=i),this.push(i,e)}},this.end=function(t){if(this.collector){if(!this.collector.end(t))return;this.collector=null}this.pop()},this.parse=function(t){return this.top=new Ot,function(t,a){function n(t,n,e){t=t.toLowerCase(),(e=e||Y[t])||o.push(t);var i=[];G.lastIndex=0;for(var s=G.exec(n);s;){var r=null!=s[2]?s[2]:null!=s[3]?s[3]:null!=s[4]?s[4]:null==s[5]||s[5];i.push({name:s[1],value:r,expr:null!=s[4]}),s=G.exec(n)}a.start(t,i,!!e)}function e(t){t=t.toLowerCase();var n=o.pop();if(n!==t)throw new Error("Unmatched close tag. Current Open tag is <"+n+"> but found </"+t+">");a.end(t)}for(var i="",s=null,o=[];t;){var r=t.indexOf("<");if(-1===r)i+=t,t=null;else if(0<r)i+=t.substring(0,r),t=t.substring(r);else{var u=t.charAt(r+1);if("!"===u&&"--"===t.substring(r+2,r+4)){i&&a.text&&(a.text(i),i="");var h=t.indexOf("--\x3e",r+3);if(-1===h)throw new Error("Parse error: comment not closed");a.comment&&a.comment(t.substring(r+3,h)),t=t.substring(h+3)}else if("/"===u&&(s=J.exec(t)))i&&a.text&&(a.text(i),i=""),t=t.substring(r+s[0].length),e(s[1]);else if(s=W.exec(t))i&&a.text&&(a.text(i),i=""),t=t.substring(r+s[0].length),n(s[1],s[2],s[3]);else{var l=t.indexOf("<",r+1);t=-1===l?(i+=t,null):(i+=t.substring(r,l),t.substring(l))}}}if(i&&a.text&&a.text(i),0<o.length)throw new Error("Unclosed tag: "+o[0])}(t.trim(),{start:this.start.bind(this),end:this.end.bind(this),text:this.text.bind(this)}),this.top.trim()},this.compile=function(t,n,e){var i=new r(Object.assign(n||{},Bt),n||{},this.resolve,e);return"function($){return "+this.parse(t).compile(i)+";}"},this.compileFn=function(t,n,e){var i=new r(Object.assign(n||{},Bt),n||{},this.resolve,e),s=this.parse(t).compile(i);return new Function("$","return "+s+";")},this.transpile=function(t,n){return ot(this,t,n)},this.loadXTags=function(t,n){return function(s,t,r){at(t,{tag:function(t,n,e){"x-tag"!==t&&X("Unsupported tag: '"+t+"'"),n&&n.name||X("x-tag attribute 'name' is required");var i=s.compileFn(e,Q(n.import));r(n.name,i,!n.static)},text:function(){}})}(this,t,n)}}var Pt=/^\s*import\s+(\S+)\s+from\s+(?:(\"[^"]+\")|(\'[^']+\')|([^"'][^;\s]*));?$/gm,Mt=/^\s*export\s+default\s+/m;function zt(){this.createScript=function(t,n){var a={};t=t.replace(Pt,function(t,n,e,i,s){var r=e||i||s;if(r)if("."===r[0]&&"/"===r[1])a[n]=r;else if("Qute"!==n)throw console.warning("Imports are ignored in dev version!"),new Error("Only relative paths are supported for import statements: "+t.trim());return t.replace("import ","//import ")});var e=!1;t=t.replace(Mt,function(t){return e=!0,"var __DEFAULT_EXPORT__ = "}),t=(new Ft).transpile(t),r.buble&&r.buble.transform&&(t=r.buble.transform(t).code),e&&(t+="\nreturn __DEFAULT_EXPORT__;\n");var i=new Function(t)(),s=new Vt;return s.name=i?n||o(u(i.prototype.$tag)):null,s.code=t,s.deps=a,s.comp=i,s},this.loadScript=function(t,n){return this.createScript(t.textContent,t.getAttribute("name")).load(n)},this.load=function(t){for(var n=(t?t.document:h.document).querySelectorAll('script[type="text/jsq"]'),e=0,i=n.length;e<i;e++)this.loadScript(n[e],t)}}function Vt(){this.name=null,this.code=null,this.comp=null,this.deps=null,this.load=function(t){return this.name&&(r[this.name]=this.comp),this}}var Zt=/%s/g;R.ERR.resolve=function(t){var n=Dt[t];if(n){var e=Array.prototype.slice.call(arguments);e[0]=n,n=function(t){var e=1,i=arguments;return t.replace(Zt,function(t,n){return i[e++]})}.apply(null,e)}else n="Qute Error: "+t;throw new Error(n)};var Dt={5:"Usage: Qute(tag[, viewModelDefinition])",10:"Broken list fragment. Ignoring updates",11:"Invalid index: '%s'. Length is %s",12:"Invalid insertion index: '%s'. Length is %s'",13:"Remove anchor is invalid: '%s'. Length is %s",14:"Invalid move from index: '%s'. Length is %s",15:"Invalid move to index: '%s'. Length is %s",20:"Invalid dynamic component. Should be a ViewModel constructor or a xtag name",23:"Could not resolve ViewModel at runtime for tag: '%s'",24:"dynamic for directive accepts only List instances and not regular arrays",25:"List properties cannot be used with the static for directive",26:"Bug? Unknown xattr name: %s",27:"Unknown converter: %s",28:"x-channel cannot be used on regular DOM elements: %s",30:"Possible infinite loop detected",31:"Incompatible assign for list property: %s",32:"No render function defined for the ViewModel!",33:"VM is already mounted!",34:"VM is not mounted!",35:"View not connected",36:"No template found for tag '%s'",37:"Failed to install plugin %s. Plugins must provide an install(ctx) method.",38:"Posting message to unknown topic %s",39:"x-channel used on a VM not defining channels: %s"};function Rt(t){(new Ft).loadXTags(t,function(t,n,e){R.register(t,n,e)})}return R.Compiler=Ft,R.compile=function(t,n){return(new Ft).compileFn(t,n)},R.css("x-tag { display:none; }\n"),R.load=function(t){if(t)Rt("#"===t[0]?h.document.getElementById(t.substring(1)).textContent:t);else for(var n=h.document.getElementsByTagName("x-tag"),e=0,i=n.length;e<i;e++)Rt(n[e].innerHTML)},R.Loader=zt,R.loadScripts=function(){(new zt).load()},R}(window);
//# sourceMappingURL=qute-dev-0.9.0.min.js.map
