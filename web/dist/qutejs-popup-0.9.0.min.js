var QutejsPopup=function(t,l){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var h="default"in l?l.default:l;function e(t,e,n,i){i.top=e.bottom,i.top+t.height>n.bottom&&(i.top=e.top-t.height)}function n(t,e,n,i){i.top=e.top-t.height,i.top<n.top&&(i.top=e.bottom)}function i(t,e,n,i){i.left=e.right,i.left+t.width>n.right&&(i.left=e.left-t.width)}function o(t,e,n,i){i.left=e.left-t.width,i.left<n.left&&(i.left=e.right)}var f={top:n,bottom:e,left:o,right:i},u={start:function(t,e,n,i){i.top=e.top,i.top+t.height>n.bottom&&(i.top=e.bottom-t.height)},end:function(t,e,n,i){i.top=e.bottom-t.height,i.top<n.top&&(i.top=e.top)},center:function(t,e,n,i){i.top=e.top+(e.height-t.height)/2},top:n,bottom:e},c={start:function(t,e,n,i){i.left=e.left,i.left+t.width>n.right&&(i.left=e.right-t.width)},end:function(t,e,n,i){i.left=e.right-t.width,i.left<n.left&&(i.left=e.left)},center:function(t,e,n,i){i.left=e.left+(e.width-t.width)/2},left:o,right:i};function s(t){this.el=function(t){var e=l.document.createElement("DIV");e.className="qute-popup";var n=e.style;n.visibility="hidden",n.position="absolute",n.overflow="hidden";var i=l.document.createElement("DIV");if(i.className="qute-popup-content",i.style.position="relative",e.appendChild(i),t.jquery)i.appendChild(t[0]);else if("string"==typeof t)i.innerHTML=t;else if(Array.isArray(t))for(var o=0,s=t.length;o<s;o++)i.appendChild(t[o]);else i.appendChild(t);return e}(t),this.pos="bottom",this.align="start",this.closeOnClickOpt=!0,this.effectName=null}s.prototype={update:function(t){t.jquery&&(t=t[0]);var e=function(t,e){var n=0,i=0,o=h.innerWidth,s=h.innerHeight;if(e.length)for(var r=0,p=e.length;r<p;r++){var l=e[r].getBoundingClientRect();l.left>n&&(n=l.left),l.right<o&&(o=l.right),l.top>i&&(i=l.top),l.bottom<s&&(s=l.bottom)}return{left:n,top:i,right:o,bottom:s,width:o-n,height:s-i}}(0,this.ofs),n=t.getBoundingClientRect();if(!(n.top>=e.bottom||n.bottom<=e.top||n.left>=e.right||n.right<=e.left)){var i=this.el.style,o=this.align;"fill"===o?("bottom"===this.pos||"top"===this.pos?i.width=t.offsetWidth+"px":i.height=t.offsetHeight+"px",o="start"):(i.width&&(i.width=""),i.height&&(i.height=""));var s=this.el.getBoundingClientRect(),r={},p=f[this.pos];if(!p)throw new Error("Invalid position argument: "+this.pos+". Expecting: top|bottom|left|right");p(s,n,e,r);var l=null==r.top?u:c,a=l[o];if(!a)throw new Error("Invalid vert align argument: "+o+". Expecting: "+Object.keys(l).join("|"));return a(s,n,e,r),i.left=r.left+h.pageXOffset+"px",i.top=r.top+h.pageYOffset+"px",i.visibility="visible",this}this.el.style.visibility="hidden"},open:function(t){if(!this.el.parentNode){for(var n,e=!1,i=this,o=function(){e||(h.requestAnimationFrame(function(){i.update(t),e=!1}),e=!0)},s=[],r=l.document.body,p=t.parentNode;p&&p!==r;)(p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&(s.push(p),p.addEventListener("scroll",o)),p=p.parentNode;h.addEventListener("scroll",o),h.addEventListener("resize",o),this.ofs=s,this.closeOnClickOpt&&(n=function(t){i.el.contains(t.target)||i.close()},h.setTimeout(function(){l.document.addEventListener("click",n)},0)),this.cleanup=function(){n&&l.document.removeEventListener("click",n),h.removeEventListener("resize",o),h.removeEventListener("scroll",o);for(var t=0,e=s.length;t<e;t++)s[t].removeEventListener("scroll",o)},this.onOpen&&this.onOpen(this),l.document.body.appendChild(this.el),this.update(t),this.el.classList.add("qute-show")}},close:function(){this.onClose&&this.onClose(this),this.cleanup();var t=this.el;if(t.classList.remove("qute-show"),this.effectName){var e=function(){t.style.visibility="hidden",t.parentNode&&t.parentNode.removeChild(t),t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e)}else t.style.visibility="hidden",t.parentNode.removeChild(t)},position:function(t,e){if(void 0===e){var n=(t=t.trim()).indexOf(" ");-1<n&&(e=t.substring(n+1).trim(),t=t.substring(0,n))}return this.pos=t,e&&(this.align=e),this},closeOnClick:function(t){return this.closeOnClickOpt=t,this},effect:function(t){return this.effectName=t,this.el.className=t?"qute-popup qute-effect-"+t:"qute-popup",this}};return t.css("\n.qute-popup.qute-effect-fade .qute-popup-content {\n\topacity: 0;\n\t-webkit-transition: opacity 0.3s;\n\t-moz-transition: opacity 0.3s;\n\t-ms-transition: opacity 0.3s;\n\ttransition: opacity 0.3s;\n}\n.qute-popup.qute-effect-fade.qute-show .qute-popup-content {\n\topacity: 1;\n}\n\n\n.qute-popup.qute-effect-slide .qute-popup-content {\n\t-webkit-transform: translateY(-20%);\n\t-moz-transform: translateY(-20%);\n\t-ms-transform: translateY(-20%);\n\ttransform: translateY(-20%);\n\topacity: 0;\n\t-webkit-transition: opacity 0.3s, transform 0.3s;\n\t-moz-transition: opacity 0.3s, transform 0.3s;\n\t-ms-transition: opacity 0.3s, transform 0.3s;\n\ttransition: opacity 0.3s, transform 0.3s;\n}\n.qute-popup.qute-effect-slide.qute-show .qute-popup-content {\n\t-webkit-transform: translateY(0);\n\t-moz-transform: translateY(0);\n\t-ms-transform: translateY(0);\n\ttransform: translateY(0);\n\topacity: 1;\n}\n"),t("popup",{init:function(){return{position:"bottom start",animation:null,autoClose:!0}},render:function(){return document.createComment("[popup]")},created:function(){var t=this.$slots;if(!t||!t.default)throw new Error("<popup> requires a content!");this.popup=new s(t.default).effect(this.animation).position(this.position).closeOnClick(this.autoClose);var e=this;this.popup.onOpen=function(){e.emit("open",e.popup.el)},this.popup.onClose=function(){e.emit("close",e.popup.el)}},open:function(t){this.popup.open(t)},close:function(){this.popup.close()}}).channel(function(t,e){"open"===t?this.open(e):"close"===t&&this.close()}).watch("position",function(t){return this.popup.position(t),!1}).watch("animation",function(t){return this.popup.effect(t),!1}).watch("autoClose",function(t){return this.popup.closeOnClick(!!t),!1})}(Qute,window);
//# sourceMappingURL=qutejs-popup-0.9.0.min.js.map
