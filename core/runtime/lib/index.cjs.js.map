{"version":3,"file":"index.cjs.js","sources":["../src/error.js","../src/utils.js","../src/update.js","../src/context.js","../src/registry.js","../src/binding.js","../src/emit.js","../src/rendering.js","../src/list.js","../src/vm.js","../src/index.js"],"sourcesContent":["\nfunction ERR() {\n\tERR.resolve.apply(null, arguments);\n}\n\nERR.resolve = function() {\n\tthrow new Error('Qute Error: '+Array.prototype.slice.call(arguments));\n}\n\nexport default ERR;\n","\nimport { kebabToCamel } from '@qutejs/commons';\n\nfunction stopEvent(e) {\n\te.preventDefault();\n\te.stopPropagation();\n}\n\nfunction chainFnAfter(fn, prevFn) {\n\treturn prevFn ? function(arg) {\n\t\tprevFn(arg);\n\t\treturn fn(arg);\n\t} : fn;\n}\n\nfunction closestVM(el) {\n\twhile (el && !el.__qute__) {\n\t\tel = el.parentNode;\n\t}\n\treturn el && el.__qute__;\n}\n\n// filter is a an array whoes first item is true or false. See compiler x-attrs encoding\nfunction filterKeys(obj, filter) {\n\tvar keys = Object.keys(obj);\n\tif (filter) {\n\t\tvar incl = filter[0]; // true: include, false: exclude\n\t\treturn keys.filter(function(key) {\n\t\t\treturn (filter.indexOf(key, 1) > -1) === incl;\n\t\t});\n\t} else {\n\t\treturn keys;\n\t}\n}\n\nexport { stopEvent, chainFnAfter, closestVM, filterKeys, kebabToCamel };\n","import window from '@qutejs/window';\nimport ERR from './error.js';\n\n\nvar UpdateQueue = {\n\tmaxNestedLoops: 50,\n\tqueue: [],\n\tafter: null, // routines to run after the queue is processed\n\tpush: function(op) {\n\t\tif (!this.queue.length) { // schedule\n\t\t\tvar self = this;\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tself.run();\n\t\t\t}, 0);\n\t\t}\n\t\tthis.queue.push(op);\n\t},\n\t// Add a callback to be invoked after the current queue run. If the queue is empty then the callback is immediately run\n\t// As queue tasks may push tasks into the queue, pushing a regular task in the queue after an update does not guarantee\n\t// the task will be run at the end.\n\t// This is usefull to test (to make assertion after all the uopdates where done)\n\t// Usually this method is called after an update\n\trunAfter: function(runAfterCb) {\n\t\tif (!this.queue.length) {\n\t\t\trunAfterCb();\n\t\t} else {\n\t\t\tif (!this.after) this.after = [runAfterCb];\n\t\t\telse this.after.push(runAfterCb);\n\t\t}\n\t},\n\trun: function() {\n\t\tvar queue = this.queue;\n\t\tvar cnt = queue.length;\n\t\tvar max = cnt+this.maxNestedLoops; // allowed iteration to avoid infintite loops\n\t\twhile (queue.length > 0) {\n\t\t\tqueue[0]();\n\t\t\t// remove from queue after execution\n\t\t\tqueue.shift();\n\t\t\tif (++cnt > max) ERR(30);\n\t\t}\n\n\t\t// run the 'after' routines if any\n\t\tif (this.after) {\n\t\t\tvar after = this.after;\n\t\t\tfor (var i=0,l=after.length; i<l; i++) {\n\t\t\t\tafter[i]();\n\t\t\t}\n\t\t\tthis.after = null; // clear the after array\n\t\t}\n\t}\n\n}\n\nexport default UpdateQueue;\n","import window from '@qutejs/window';\nimport ERR from './error.js';\n\nexport default function Context(data) {\n\tif (data) Object.assign(this, data);\n\tthis.$topics = {lifecycle:[]}; // lifecycle is a bultin topic\n}\n\nContext.prototype = {\n\tpost: function(topic, msg, data) {\n\t\tvar listeners = this.$topics[topic];\n\t\tif (!listeners) ERR(38, topic);\n\t\tfor (var i=0,l=listeners.length;i<l;i++) {\n\t\t\tif (listeners[i](msg, data) === false) {\n\t\t\t\tbreak; // stop if one of the listeners returns false\n\t\t\t}\n\t\t}\n\t},\n\tpostAsync: function(topic, msg, data) {\n\t\tvar self = this;\n\t\twindow.setTimeout(function() { self.post(topic, msg, data); }, 0);\n\t},\n\tsubscribe: function(topic, listenerFn) {\n\t\tvar listeners = this.$topics[topic];\n\t\tif (!listeners) {\n\t\t\tthis.$topics[topic] = listeners = [];\n\t\t}\n\t\tlisteners.push(listenerFn);\n\t\treturn this;\n\t},\n\tsubscribeOnce: function(topic, event, listenerFn) {\n\t\tvar self = this;\n\t\tvar onceSubscription = function(msg, data) {\n\t\t\tif (msg === event) {\n\t\t\t\tlistenerFn(msg, data);\n\t\t\t\tself.unsubscribe(topic, onceSubscription);\n\t\t\t}\n\t\t}\n\t\tthis.subscribe(topic, onceSubscription);\n\t\treturn onceSubscription;\n\t},\n\tunsubscribe: function(topic, listenerFn) {\n\t\tvar listeners = this.$topics[topic];\n\t\tif (listeners) {\n\t\t\tvar i = listeners.indexOf(listenerFn);\n\t\t\tif (i > -1) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t},\n\tfreeze: function() {\n\t\tObject.freeze(this);\n\t}\n}\n","\n\nvar VMS = {};\nvar XTAGS = {};\n\nexport function getTag(tag) {\n\treturn XTAGS[tag];\n}\n\nexport function registerTag(tag, templateFn, isCompiled) {\n\tXTAGS[tag] = templateFn;\n\ttemplateFn.$compiled = !!isCompiled;\n\ttemplateFn.$tag = tag;\n\treturn templateFn;\n}\n\nexport function getVM(tag) {\n\treturn VMS[tag];\n}\n\nexport function registerVM(tag, vm) {\n\tVMS[tag] = vm;\n}\n\nexport function getVMOrTag(tag) {\n\treturn VMS[tag] || XTAGS[tag];\n}\n\nexport function snapshotRegistry() {\n\treturn {VMS: Object.assign({}, VMS), XTAGS: Object.assign({}, XTAGS)};\n}\n\nexport function restoreRegistry(snapshot) {\n\tVMS = snapshot.VMS;\n\tXTAGS = snapshot.XTAGS;\n}\n","import {stopEvent, filterKeys} from './utils.js';\n\nfunction addClassMap(cl, value) {\n\tvar keys = Object.keys(value);\n\tfor (var i=0,l=keys.length; i<l; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = value[key];\n\t\tif (val) cl.add(key); else cl.remove(key);\n\t}\n}\n\nfunction bindClass(elt, value) {\n\tif (!value) return;\n\tvar cl = elt.classList;\n\tif (Array.isArray(value)) {\n\t\tfor (var i=0,l=value.length; i<l; i++) {\n\t\t\tvar val = value[i];\n\t\t\tif (val) {\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\tcl.add(val);\n\t\t\t\t} else { // an object?\n\t\t\t\t\taddClassMap(cl, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else { // an object\n\t\taddClassMap(cl, value);\n\t}\n}\n\nfunction bindStyle(elt, value) {\n\tif (!value) return;\n\tvar style = elt.style;\n\tif (Array.isArray(value)) {\n\t\tfor (var i=0,l=value.length; i<l; i++) {\n\t\t\tObject.assign(style, value[i]);\n\t\t}\n\t} else { // an object\n\t\tObject.assign(style, value);\n\t}\n\n}\n\n// the listeners injected from a vm to a nested functional view\n// must run in parent vm, context not in fucntional view context!\n// This is why we need to use the vm from the closure scope when the listener was created\nexport function createListener(vm, fn) {\n\treturn function(e) {\n\t\tif (fn.call(vm, e) === false) {\n\t\t\tstopEvent(e);\n\t\t}\n\t};\n}\n\nexport function createListeners(vm, $listeners) {\n\tif ($listeners) {\n\t\tfor (var key in $listeners) {\n\t\t\t$listeners[key] = createListener(vm, $listeners[key]);\n\t\t}\n\t}\n\treturn $listeners;\n}\n\nexport function SetText(el, model, expr) {\n\treturn function() {\n\t\tvar val = expr(model);\n\t\tif (val !== el.nodeValue) {\n\t\t\tel.nodeValue = val;\n\t\t}\n\t}\n}\n\nexport function SetAttr(el, model, key, valFn) {\n\treturn function(changedKey) {\n\t\t//if (!changedKey || changedKey === key) {\n\t\t\tvar val = valFn(model);\n\t\t\tif (el.getAttribute(key) !== val) {\n\t\t\t\tif (val == null) {\n\t\t\t\t\tel.removeAttribute(key);\n\t\t\t\t} else {\n\t\t\t\t\tel.setAttribute(key, val);\n\t\t\t\t}\n\t\t\t}\n\t\t//}\n\t}\n}\n\n/*\nexport function SetBindings(el, model, bindFn) {\n\treturn function(changedKey) {\n\t\tvar bindings = bindFn(model);\n\t\tfor (var key in bindings) {\n\t\t\tvar val = bindings[key];\n\t\t\tif (el.getAttribute(key) !== val) {\n\t\t\t\tel.setAttribute(key, val);\n\t\t\t}\n\t\t}\n\t}\n}\n*/\nexport function SetInnerHTML(el, model, valFn) {\n\treturn function() {\n\t\tvar val = valFn(model);\n\t\tif (el.innerHTML !== val) {\n\t\t\tel.innerHTML = val || '';\n\t\t}\n\t}\n}\n\nexport function SetDisplay(el, model, valFn) {\n\treturn function() {\n\t\tvar val = valFn(model);\n\t\tvar display = el.style.display;\n\t\t// backup the current diaply when toggliong OFF to be able to restore if needed\n\t\tif (val) {\n\t\t\tif (display === 'none') {\n\t\t\t\tel.style.display = el.__qute_display || ''; // remove 'none'\n\t\t\t}\n\t\t} else if (display !== 'none') {\n\t\t\tif (el.__qute_display == null) el.__qute_display = display;\n\t\t\tel.style.display = 'none';\n\t\t}\n\t}\n}\n\n\nexport function SetToggle(el, model, valFn) {\n\t// valFn returns a map of attr keys to values\n\treturn function() {\n\t\tvar attrs = valFn(model);\n\t\tvar keys = Object.keys(attrs);\n\t\tfor (var i=0,l=keys.length;i<l;i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (attrs[key]) {\n\t\t\t\tel.setAttribute(key, key);\n\t\t\t} else {\n\t\t\t\tel.removeAttribute(key);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function SetClass(el, model, valFn) {\n\treturn function() {\n\t\t//TODO only if modified\n\t\tbindClass(el, valFn(model));\n\t}\n}\n\nexport function SetStyle(el, model, valFn) {\n\treturn function() {\n\t\t//TODO only if modified\n\t\tbindStyle(el, valFn(model));\n\t}\n}\n\nexport function SetProp(vm, model, key, valFn) {\n\treturn function(changedKey) {\n\t\t//if (!changedKey || changedKey === key) {\n\t\t\tvm.$set(key, valFn(model));\n\t\t//}\n\t}\n}\n\nexport function SetDOMAttrs(el, model, filter) {\n\treturn function() {\n\t\tvar $attrs = model.$attrs;\n\t\tif ($attrs) {\n\t\t\tvar keys = filterKeys($attrs, filter);\n\t\t\tfor (var i=0,l=keys.length; i<l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tel.setAttribute(key, $attrs[key]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function SetFuncAttrs($attrs, vm, filter) { // vm is the parent vm (i.e. current model)\n\treturn function() {\n\t\tvar vmAttrs = vm.$attrs;\n\t\tif (vmAttrs) {\n\t\t\tvar keys = filterKeys(vmAttrs, filter);\n\t\t\tfor (var i=0,l=keys.length; i<l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\t$attrs[key] = vmAttrs[key];\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function SetFuncAttr($attrs, vm, key, val) { // vm is the parent vm (i.e. current model)\n\treturn function() {\n\t\t$attrs[key] = val(vm);\n\t}\n}\n// TODO set $attrs on VMs\nexport function SetVMAttrs(vm, parentVM, filter) {\n\treturn function() {\n\t\tvar parentAttrs = parentVM.$attrs;\n\t\tif (parentAttrs) {\n\t\t\tvar keys = filterKeys(parentAttrs, filter);\n\t\t\tfor (var i=0,l=keys.length; i<l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tvm.$set(key, parentAttrs[key]);\n\t\t\t}\n\t\t}\n\t}\n}\n\n","import window from '@qutejs/window';\nimport ERR from './error.js';\n\n// emitter prototype\nvar Emitter = {\n\temit: function(event, data) {\n\t\tif (!this.$el) ERR(35);\n\t\tthis.$el.dispatchEvent(new window.CustomEvent(event, {bubbles: true, detail: data === undefined ? this : data }));\n\n\t},\n\temitAsync: function(event, data, timeout) {\n\t\tvar self = this;\n\t\twindow.setTimeout(function() { self.emit(event, data); }, timeout || 0);\n\t}\n}\nexport default Emitter;\n","import {document} from '@qutejs/window';\nimport ERR from './error.js';\n\nimport Context from './context.js';\nimport { getVMOrTag, getVM } from './registry.js';\nimport {createListeners, createListener, SetClass, SetStyle, SetDisplay, SetToggle, SetText, SetInnerHTML, SetAttr, SetDOMAttrs, SetFuncAttrs, SetFuncAttr} from './binding.js';\nimport { filterKeys } from './utils.js';\nimport Emitter from './emit.js';\n\nfunction ViewRenderingContext(model, marker, isExpr, changeCb, noCache, xattrs, childrenFn) {\n\n\tvar cache = noCache ? null : {};\n\tvar r = null; // the view rendering context\n\tvar cview = null; // current element\n\treturn function(propKey, initialUpdate) {\n\t\tvar el, viewXTag = isExpr(model);\n\t\tif (viewXTag !== cview) {\n\t\t\tvar parent = marker.parentNode;\n\t\t\tif (r) {\n\t\t\t\tr.$disconnect();\n\t\t\t\tparent.removeChild(marker.previousSibling);\n\t\t\t}\n\t\t\tif (viewXTag) {\n\t\t\t\tr = cache && cache[viewXTag];\n\t\t\t\tif (!r) {\n\t\t\t\t\tr = new Rendering(model);\n\t\t\t\t\tif (cache) cache[viewXTag] = r;\n\t\t\t\t}\n\t\t\t\tel = r.r(viewXTag, xattrs, childrenFn(r));\n\t\t\t\tparent.insertBefore(el, marker);\n\t\t\t\tr.$connect();\n\t\t\t} else {\n\t\t\t\tr = null;\n\t\t\t}\n\n\t\t\tif (changeCb && !initialUpdate) { // avoid calling changeCb the first time the if is rendered\n\t\t\t\tchangeCb.call(model, el && el.__qute__);\n\t\t\t}\n\t\t\tcview = viewXTag;\n\t\t} else if (r) {\n\t\t\t// only update children\n\t\t\tr.$update();\n\t\t}\n\t}\n}\n\nfunction IfRenderingContext(model, start, end, expr, changeCb, _if, _else) {\n\tvar r = null; // the IF / ELSE rendering context\n\tvar state = undefined; // the current IF / ELSE value\n\treturn function(propKey, initialUpdate) {\n\t\tvar newState = !!expr(model);\n\t\tif (newState !== state) {\n\t\t\tr && r.$disconnect();\n\t\t\tvar parent = start.parentNode;\n\t\t\t// remove current if branch\n\t\t\twhile (start.nextSibling && start.nextSibling !== end) {\n\t\t\t\tparent.removeChild(start.nextSibling);\n\t\t\t}\n\t\t\tr = new Rendering(model); // create the IF / ELSE rendering context\n\t\t\tstate = newState;\n\t\t\tvar children = state ? _if(r) : (_else ? _else(r) : []); //_else may not be defined\n\t\t\tfor (var i=0,l=children.length; i<l; i++) {\n\t\t\t\tparent.insertBefore(children[i], end);\n\t\t\t}\n\t\t\tr.$connect();\n\t\t\tif (changeCb && !initialUpdate) { // avoid calling changeCb the first time the if is rendered\n\t\t\t\tchangeCb.call(model, state);\n\t\t\t}\n\t\t} else if (r) {\n\t\t\t// only update children\n\t\t\tr.$update();\n\t\t}\n\t}\n}\n\nfunction ForRenderingContext(model, start, end, listFn, iterationFn) {\n\tvar r = null; // the for rendering context\n\tvar list = null; // the current list\n\treturn function(propKey) {\n\t\tvar newList = listFn(model);\n\t\tif (newList !== list) {\n\t\t\tr && r.$disconnect();\n\t\t\tvar parent = start.parentNode;\n\t\t\t// remove current for content\n\t\t\twhile (start.nextSibling && start.nextSibling !== end) {\n\t\t\t\tparent.removeChild(start.nextSibling);\n\t\t\t}\n\t\t\tr = new Rendering(model); // create the FOR rendering context\n\t\t\tlist = newList;\n\t\t\t// render content\n\t\t\tif (list) {\n\t\t\t\tif (!Array.isArray(list)) {\n\t\t\t\t\t//if (list instanceof List) ERR(25);\n\t\t\t\t\tif (list.$createListFragment) ERR(25);\n\t\t\t\t\tlist = Object.keys(list);\n\t\t\t\t}\n\t\t\t\tif (list.length > 0) {\n\t\t\t\t\tvar l = list.length-1;\n\t\t\t\t\tfor (var i=0; i<l; i++) {\n\t\t\t\t\t\tvar children = iterationFn(list[i], i, true);\n\t\t\t\t\t\tif (children) {\n\t\t\t\t\t\t\tfor (var k=0,ll=children.length; k<ll; k++) {\n\t\t\t\t\t\t\t\tparent.insertBefore(children[k], end);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar children = iterationFn(list[i], i, false);\n\t\t\t\t\tif (children) {\n\t\t\t\t\t\tfor (var i=0,l=children.length; i<l; i++) {\n\t\t\t\t\t\t\tparent.insertBefore(children[i], end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tr.$connect();\n\t\t} else if (r) {\n\t\t\t// just update children\n\t\t\tr.$update();\n\t\t}\n\t}\n}\n\nfunction isVM(obj) {\n\treturn obj && obj.prototype && obj.prototype.__VM__;\n}\n\nfunction appendChildren(parent, children) {\n\tfor (var i=0, l=children.length; i<l; i++) parent.appendChild(children[i]);\n}\nfunction removeRange(from, to) {\n\tvar parent = from.parentNode;\n\twhile (from.nextSibling && from.nextSibling !== to) {\n\t\tparent.removeChild(from.nextSibling);\n\t}\n}\n\nfunction applyListeners(el, vm, listeners, doNotWrap) {\n\tfor (var key in listeners) {\n\t\tvar fn = listeners[key];\n\t\tif (key === 'create') {\n\t\t\tfn.call(vm, el);\n\t\t} else {\n\t\t\tel.addEventListener(key, doNotWrap ? fn : createListener(vm, fn));\n\t\t}\n\t}\n}\n\nfunction extractSlots(children) {\n\tif (children && children.length) {\n\t\tvar namedSlots = {}, nestedCnt = 0, hasContent = false;\n\t\tfor (var i=0,l=children.length; i<l; i++) {\n\t\t\tvar child = children[i];\n\t\t\tvar nodeType = child.nodeType;\n\t\t\tswitch (nodeType) {\n\t\t\t\tcase 1:\n\t\t\t\t\tif (child.nodeName === 'NESTED') { // select only 'nested' elements\n\t\t\t\t\t\tvar slot = child.getAttribute('name') || 'default';\n\t\t\t\t\t\tvar slotChildren = [];\n\t\t\t\t\t\tvar node = child.firstChild;\n\t\t\t\t\t\twhile (node) {\n\t\t\t\t\t\t\tslotChildren.push(node);\n\t\t\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnamedSlots[slot] = slotChildren;\n\t\t\t\t\t\tnestedCnt++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\thasContent = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tif (child.nodeValue.trim()) hasContent = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (nestedCnt) {\n\t\t\treturn namedSlots;\n\t\t} else if (hasContent) { // default slot\n\t\t\tnamedSlots.default = children;\n\t\t\treturn namedSlots;\n\t\t}\n\t}\n\treturn null;\n}\n\n// ==============================================\n\n\nvar RenderingProto = {\n\tx: function(expr) { // expression {{ ... }}\n\t\tvar text = expr(this.vm);\n\t\tvar el = document.createTextNode(text);\n\t\tthis.up(SetText(el, this.vm, expr));\n\t\treturn el;\n\t},\n\tt: function(value) { // text\n\t\treturn document.createTextNode(value);\n\t},\n\tg: function(isFn, xattrs, children) { // dynamic tag using 'is'\n\t\tvar tag = isFn(this.vm);\n\t\tvar XTag = getVMOrTag(tag);\n\t\treturn XTag ? this.v(XTag, xattrs, children) : this.h(tag, xattrs, children);\n\t},\n\th: function(tag, xattrs, children) { // dom node\n\t\tvar el = document.createElement(tag);\n\t\tif (xattrs) {\n\t\t\tvar vm = this.vm;\n\t\t\tfor (var key in xattrs) {\n\t\t\t\tvar up = null;\n\t\t\t\tvar val = xattrs[key];\n\t\t\t\tif (key.charCodeAt(0) === 36) { // $ - extended attribute\n\t\t\t\t\tif (key === '$on') {\n\t\t\t\t\t\tapplyListeners(el, vm, val);\n\t\t\t\t\t} else if (key === '$class') {\n\t\t\t\t\t\tup = SetClass(el, vm, val);\n\t\t\t\t\t} else if (key === '$style') {\n\t\t\t\t\t\tup = SetStyle(el, vm, val);\n\t\t\t\t\t} else if (key === '$show') {\n\t\t\t\t\t\tup = SetDisplay(el, vm, val);\n\t\t\t\t\t} else if (key === '$toggle') {\n\t\t\t\t\t\tup = SetToggle(el, vm, val);\n\t\t\t\t\t} else if (key === '$html') {\n\t\t\t\t\t\tup = SetInnerHTML(el, vm, val);\n\t\t\t\t\t} else if (key === '$attrs') {\n\t\t\t\t\t\tup = SetDOMAttrs(el, vm, val);\n\t\t\t\t\t} else if (key === '$listeners') {\n\t\t\t\t\t\t//TODO filter like for $attrs\n\t\t\t\t\t\t//TODO value must be a function ... and not use directly vm.$listeners\n\t\t\t\t\t\tapplyListeners(el, vm, vm.$listeners, true); // do not wrap listeners fns (already wrapped by the parent context)\n\t\t\t\t\t\t//TODO\n\t\t\t\t\t} else if (key === '$channel') {\n\t\t\t\t\t\tERR(28, tag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tERR(26, key);\n\t\t\t\t\t}\n\t\t\t\t} else if (typeof val === 'function') { // a dynamic binding\n\t\t\t\t\tup = SetAttr(el, vm, key, val);\n\t\t\t\t} else {\n\t\t\t\t\tel.setAttribute(key, val);\n\t\t\t\t}\n\t\t\t\tif (up) {\n\t\t\t\t\tthis.up(up)(); // push then execute\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (children) appendChildren(el, children);\n\t\treturn el;\n\t},\n\t// element with static children (innerHTML is set from the subtree)\n\thh:function(tag, xattrs, content, type) {\n\t\tvar el = this.h(tag, xattrs);\n\t\tif (type) { // convert can be a function to convert the content before injecting in the dom\n\t\t\tvar converter = Context.Qute.converters[type];\n\t\t\tif (!converter) {\n\t\t\t\tERR(27, type);\n\t\t\t}\n\t\t\tcontent = converter(content, this);\n\t\t}\n\t\tel.innerHTML = content;\n\t\treturn el;\n\t},\n\tr: function(tag, xattrs, children) {\n\t\tvar XTag = getVMOrTag(tag);\n\t\tif (!XTag) ERR(23, tag);\n\t\treturn this._v(XTag, xattrs, extractSlots(children));\n\t},\n\tv: function(XTag, xattrs, children) { // xtag is specified as a func reference. TODO No more used\n\t\treturn this._v(XTag, xattrs, extractSlots(children));\n\t},\n\t// vm component\n\t_v: function(XTag, xattrs, slots) { // a vm component (viewmodel)\n\t\tif (isVM(XTag)) {\n\t\t\tvar vm = new XTag(this.vm.$ctx);\n\t\t\treturn vm.$create(this, xattrs, slots);\n\t\t} else if (XTag.$compiled) { // a compiled template\n\t\t\tvar oldVm = this.vm;\n\t\t\tthis.vm = this.functx(this.vm, xattrs, slots);\n\t\t\tvar el = XTag(this, xattrs, slots); // pass xattrs and slots too?\n\t\t\tthis.vm.$el = el;\n\t\t\t// apply root bindings if any (x-class, x-style or x-show)\n\t\t\tif (this.vm.$bindings) {\n\t\t\t\tvar bindings = this.vm.$bindings;\n\t\t\t\tfor (var i=0,l=bindings.length; i<l; i+=2) {\n\t\t\t\t\tvar up = bindings[i](el, oldVm, bindings[i+1]);\n\t\t\t\t\tthis.up(up)();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.vm.$listeners) applyListeners(el, this.vm, this.vm.$listeners, true);\n\t\t\tthis.vm = oldVm;\n\t\t\treturn el;\n\t\t} else { // a hand written function\n\t\t\treturn XTag(this, xattrs, slots);\n\t\t}\n\t},\n\ts: function(slotName, defaultChildren) {\n\t\tvar vm = this.vm;\n\t\tvar slots = vm.$slots;\n\t\tvar children = slots && slots[slotName || 'default'] || defaultChildren;\n\t\tif (children) {\n\t\t\tvar frag = document.createDocumentFragment();\n\t\t\tappendChildren(frag, children);\n\t\t\treturn frag;\n\t\t}\n\t\treturn document.createComment('[slot/]'); // placeholder\n\t},\n\tw: function(isExpr, changeCb, noCache, xattrs, childrenFn) { // dynamic view\n\t\tvar marker = document.createComment('[view/]');\n\t\tvar frag = document.createDocumentFragment();\n\t\tfrag.appendChild(marker);\n\t\tvar viewFrag = ViewRenderingContext(this.vm, marker, isExpr, changeCb, noCache, xattrs, childrenFn)\n\t\tmarker.__qute__ = viewFrag;\n\t\tviewFrag(null, true);\n\t\tthis.up(viewFrag);\n\t\treturn frag;\n\t},\n\ti: function(expr, changeCb, _if, _else) { // if / else\n\t\tvar start = document.createComment('[if]');\n\t\tvar end = document.createComment('[/if]');\n\t\tvar frag = document.createDocumentFragment();\n\t\tfrag.appendChild(start);\n\t\tfrag.appendChild(end);\n\t\tvar ieFrag = IfRenderingContext(this.vm, start, end, expr, changeCb, _if, _else);\n\t\tstart.__qute__ = ieFrag;\n\t\tieFrag(null, true);\n\t\tthis.up(ieFrag);\n\t\treturn frag;\n\t},\n\t// dynamic lists - which is tracking changes and update itself\n\tl: function(listFn, iterationFn) {\n\t\tvar list = listFn(this.vm);\n\t\t//if (!list instanceof List)) ERR(24);\n\t\tif (!list.$createListFragment) ERR(24);\n\t\treturn list.$createListFragment(this, iterationFn);\n\t},\n\t// static array variant of lists - this cannot be updated it is rendered once at creation\n\ta: function(listFn, iterationFn) {\n\t\tvar start = document.createComment('[for]');\n\t\tvar end = document.createComment('[/for]');\n\t\tvar frag = document.createDocumentFragment();\n\t\tfrag.appendChild(start);\n\t\tfrag.appendChild(end);\n\t\tvar forFrag = ForRenderingContext(this.vm, start, end, listFn, iterationFn);\n\t\tstart.__qute__ = forFrag;\n\t\tforFrag(null);\n\t\tthis.up(forFrag);\n\t\treturn frag;\n\t},\n\tup: function(fn) { // register a live update function\n\t\tthis.ups.push(fn);\n//\t\tthis.ups[this.ups.length-1].push(fn);\n\t\treturn fn;\n\t},\n\t//======\n\t// eval the value of an xattr given the key - if a fucntion invoke the function within the current context otherwise return the value as is\n\teval: function(xattr) {\n\t\treturn typeof xattr === 'function' ? xattr(this.vm) : xattr;\n\t},\n\n\t// connect all nested  VMs\n\t$connect: function() {\n\t\tif (!this.isc) {\n\t\t\tvar vms = this.vms;\n\t\t\tfor (var i=0,l=vms.length; i<l; i++) vms[i].$connect();\n\t\t\tthis.isc = true;\n\t\t}\n\t\treturn this;\n\t},\n\t// disconnect all nested VMs\n\t$disconnect: function() {\n\t\tif (this.isc) {\n\t\t\tvar vms = this.vms;\n\t\t\tfor (var i=0,l=vms.length; i<l; i++) vms[i].$disconnect();\n\t\t\tthis.isc = false;\n\t\t}\n\t\treturn this;\n\t},\n\t$push: function(r) { // push a sub-renderings\n\t\tthis.vms.push(r);\n\t\tif (this.isc) r.$connect();\n\t},\n\t// refresh the DOM - call all nested update functions\n\t$update: function() {\n\t\tvar model = this.vm, ups = this.ups;\n\t\tfor (var i=0,l=ups.length;i<l;i++) ups[i](model);\n\t\treturn this;\n\t},\n\tfunctx: function(vm, xattrs, slots) { // functional context\n\t\tvar $attrs = {};\n\t\tvar ctx = {\n\t\t\t$parent: vm,\n\t\t\t$attrs: $attrs,\n\t\t\t$listeners: null,\n\t\t\t$slots: slots,\n\t\t\t$el: null,\n\t\t\t$bindings: null,\n\t\t\temit: Emitter.emit,\n\t\t\temitAsync: Emitter.emitAsync\n\t\t}\n\t\tvar bindings = null;\n\n\t\tif (xattrs) {\n\t\t\tfor (var key in xattrs) { // class, style and show, $attrs, $listeners are ignored\n\t\t\t\tvar val = xattrs[key];\n\t\t\t\tif (key.charCodeAt(0) !== 36 || key === '$html') { // $ - extended attribute -> ignore all extended attrs but $html\n\t\t\t\t\tif (typeof val === 'function') {\n\t\t\t\t\t\tthis.up(SetFuncAttr($attrs, vm, key, val))();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$attrs[key] = val;\n\t\t\t\t\t}\n\t\t\t\t\t//setFnContextAttr($attrs, vm, key, val);\n\t\t\t\t} else if (key === '$attrs') {\n\t\t\t\t\tif (vm.$attrs) {\n\t\t\t\t\t\t// inject attributes in functional tags\n\t\t\t\t\t\t// we need to create an update function to reinject attrs when model changes\n\t\t\t\t\t\t// otherwise we loose the reactivity on func tags 'x-attrs' attribute\n\t\t\t\t\t\tthis.up(SetFuncAttrs($attrs, vm, val))();\n\t\t\t\t\t}\n\t\t\t\t} else if (key === '$on') {\n\t\t\t\t\tctx.$listeners = createListeners(vm, val);\n\t\t\t\t} else if (key === '$class') {\n\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\tbindings.push(SetClass, val);\n\t\t\t\t} else if (key === '$style') {\n\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\tbindings.push(SetStyle, val);\n\t\t\t\t} else if (key === '$show') {\n\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\tbindings.push(SetDisplay, val);\n\t\t\t\t} else if (key === '$toggle') {\n\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\tbindings.push(SetToggle, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tctx.$bindings = bindings;\n\t\treturn ctx;\n\t}\n\n}\n\nfunction Rendering(vm) {\n\tthis.vm = vm; // defaults to current vm -> changed by functional views\n\tthis.ups = [];\n\t// vms are usually ViewModels but can be any object providing $connect and $disconnect methods\n\t// if you enrich the vms api you mustr check list.js since it register a ListFragment instance as a vm\n\tthis.vms = [];\n\tthis.isc = false; // is connected?\n}\nRendering.prototype = RenderingProto;\n\nexport default Rendering;\n","import {document} from '@qutejs/window';\nimport ERR from './error.js';\nimport UpdateQueue from './update.js';\nimport Rendering from './rendering.js';\n\nfunction ListFragment(rendering, listFn) {\n\tthis.start = document.createComment('[list]');\n\tthis.end = document.createComment('[/list]');\n\tthis.r = rendering;\n\tthis.listFn = listFn;\n\tthis.length = 0;\n\n\tthis.updateChildren = function(model) {\n\t\tvar first = this.start.nextSibling;\n\t\tif (!first || first === this.end || !first.$up) return;\n\t\tvar n = first, end = this.end;\n\t\twhile (n && n !== end) {\n\t\t\tif (n.$up) {\n\t\t\t\tvar ups = n.$up;\n\t\t\t\tfor (var i=0,l=ups.length;i<l;i++) {\n\t\t\t\t\tups[i](model);\n\t\t\t\t}\n\t\t\t}\n\t\t\tn = n.nextSibling;\n\t\t}\n\t}\n\n\tthis.clear = function() {\n\t\tvar n = this.start;\n\t\tvar end = this.end;\n\t\tvar parent = n.parentNode;\n\t\twhile (n.nextSibling && n.nextSibling !== end) {\n\t\t\tparent.removeChild(n.nextSibling);\n\t\t}\n\t\tif (!n.nextSibling) ERR(10);\n\t\tthis.length = 0;\n\t}\n\n\tthis.get = function(index) {\n\t\tif (index < 0 || index > this.length) {\n\t\t\treturn null;\n\t\t}\n\t\tvar l = this.length, n = null;\n\t\tif (index < l/2) { // from start\n\t\t\tn = this.start.nextSibling;\n\t\t\twhile (index-- > 0) n = n.nextSibling;\n\t\t} else { // from end\n\t\t\tindex = l - index - 1;\n\t\t\tn = this.end.previousSibling;\n\t\t\twhile (index-- > 0) n = n.previousSibling;\n\t\t}\n\t\treturn n;\n\t}\n\n\tthis.getInsertion = function(index) {\n\t\tif (index < 0 || index > this.length) ERR(11, index, length);\n\t\tif (index === 0) {\n\t\t\treturn this.start.nextSibling;\n\t\t}\n\t\tif (index === this.length) {\n\t\t\treturn this.end;\n\t\t}\n\t\treturn this.get(index);\n\t}\n\n\tthis.createItem = function(r, item, index, hasNext) {\n\t\treturn listFn(r, item, index, hasNext);\n\t}\n\n\tthis.insert = function(data, from, count) {\n\t\tif (!from) from = 0; // if undefined null or 0\n\t\tif (!count) count = data.length - from; // if undefined null or 0\n\t\tif (count < 1) return;\n\t\tvar l = from+count;\n\t\tvar listFn = this.listFn;\n\t\tvar r = this.r;\n\t\tvar node = this.getInsertion(from);\n\t\tif (!node) ERR(12, index, this.length);\n\t\t//TODO redraw if list fragment is broken insted of throwing an error?\n\t\tvar childR, vm = r.vm, parent = node.parentNode;\n\t\tvar ll = l-1;\n\t\tfor (var i=from; i<ll; i++) {\n\t\t\t// we need to wrapp each child in a rendering ctx to be able to disconnect when items are removed\n\t\t\tchildR = new Rendering(vm);\n\t\t\tvar child = this.createItem(childR, data[i], i, true);\n\t\t\tif (child) {\n\t\t\t\tparent.insertBefore(child, node);\n\t\t\t\tr.$push(childR);\n\t\t\t\tchild.__qute_ctx__ = childR;\n\t\t\t}\n\t\t}\n\t\tchildR = new Rendering(vm);\n\t\tvar child = this.createItem(childR, data[ll], ll, l<data.length);\n\t\tif (child) {\n\t\t\tparent.insertBefore(child, node);\n\t\t\tr.$push(childR);\n\t\t\tchild.__qute_ctx__ = childR;\n\t\t}\n\t\tthis.length = data.length;\n\t}\n\n\tthis.remove = function(from, count) {\n\t\tif (from + count > this.length) {\n\t\t\t// TODO enable only if debug mode\n\t\t\t//throw new Error('Removed range exceed the list length: '+from+'#'+count+'. Length is '+this.length);\n\t\t\treturn;\n\t\t}\n\t\tvar node = this.get(from);\n\t\tif (!node) ERR(13, from, this.length);\n\t\tvar i=0, parent = this.start.parentNode;\n\t\tnode = node.previousSibling; // cannot be null\n\t\twhile (i++<count) {\n\t\t\tvar child = node.nextSibling;\n\t\t\tchild.__qute_ctx__ && child.__qute_ctx__.$disconnect();\n\t\t\tparent.removeChild(child);\n\t\t}\n\t\tthis.length -= count;\n\t}\n\n\tthis.move = function(from, to) {\n\t\t// TODO this can be optimized (we can search for the 2 nodes in the same time: get2(i1, i2))\n\t\tvar node = this.get(from);\n\t\tif (!node) ERR(14, from, this.length);\n\t\tvar dstNode = this.get(to);\n\t\tif (!dstNode) ERR(15, to, this.length);\n\t\tdstNode = dstNode.nextSibling;\n\t\tif (dstNode) {\n\t\t\tdstNode.parentNode.insertBefore(node, dstNode);\n\t\t} else {\n\t\t\tdstNode.parentNode.append(node);\n\t\t}\n\t}\n}\n\n\n\nvar AP = Array.prototype;\nvar ListProto = {\n\t$createListFragment: function(rendering, listFn) {\n\t\tvar listRendering = new Rendering(rendering.vm);\n\t\tif (!this.lfs) this.lfs = [];\n\t\tvar lf = new ListFragment(listRendering, listFn);\n\t\tvar frag = document.createDocumentFragment();\n\t\tfrag.appendChild(lf.start);\n\t\tfrag.appendChild(lf.end);\n\t\tlf.insert(this.$data); // initialize\n\t\trendering.up(lf.updateChildren.bind(lf)); // register children updates\n\t\tthis.lfs.push(lf);\n\t\trendering.$push(listRendering);\n\t\treturn frag;\n\t},\n\t/*\n\t$destroy: function() { //TODO not used\n\t\tthis.lfs = null;\n\t},\n\t*/\n\t$updateNow: function() {\n\t\tif (this.lfs) {\n\t\t\tvar ops = this.ops;\n\t\t\tvar data = this.$data;\n\t\t\tvar lfs = this.lfs;\n\t\t\tvar l = lfs.length;\n\t\t\twhile (ops.length) {\n\t\t\t\tvar op = ops.shift();\n\t\t\t\tfor (var i=0,l=lfs.length; i<l; i++) {\n\t\t\t\t\top(lfs[i], data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t$update: function(op) {\n\t\tif (this.lfs) {\n\t\t\tif (this.ops.push(op) === 1) { // if queue is empty start an update task\n\t\t\t\tvar self = this;\n\t\t\t\tUpdateQueue.push(function() {\n\t\t\t\t\tself.$updateNow();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\t$redraw: function() {\n\t\tthis.$update(function(lf, data) {\n\t\t\tlf.clear();\n\t\t\tlf.insert(data);\n\t\t});\n\t},\n\t$insert: function(from, count) {\n\t\tthis.$update(function(lf, data) {\n\t\t\tlf.insert(data, from, count);\n\t\t});\n\t},\n\t$remove: function(from, count) {\n\t\tthis.$update(function(lf, data) {\n\t\t\tlf.remove(from, count);\n\t\t});\n\t},\n\t$move: function(from, to) {\n\t\tthis.$update(function(lf, data) {\n\t\t\tlf.move(from, to);\n\t\t});\n\t},\n\n\ttoJSON: function() {\n\t\treturn this.$data;\n\t},\n\tdata: function() {\n\t\treturn this.$data;\n\t},\n\tnewList: function() {\n\t\treturn new List(this.$data);\n\t},\n\n\tclear: function() {\n\t\tthis.replace([]);\n\t},\n\treplace: function (ar) {\n\t\tthis.$data = ar;\n\t\tthis.$redraw();\n\t},\n\n\tmove: function(from, to) {\n\t\tthis.$data.splice(to, 0, this.$data.splice(from, 1)[0]);\n\t\tthis.$move(from, to);\n\t},\n\n\tremove: function(item) {\n\t\tvar i = this.$data.indexOf(item);\n\t\tif (i > -1) {\n\t\t\treturn this.splice(i, 1);\n\t\t}\n\t},\n\n\tpush: function() {\n\t\tvar from = this.$data.length;\n\t\tvar r = AP.push.apply(this.$data, arguments);\n\t\tthis.$insert(from, arguments.length);\n\t\treturn r;\n\t},\n\tunshift: function() {\n\t\tvar from = this.$data.length;\n\t\tvar r = AP.unshift.apply(this.$data, arguments);\n\t\tthis.$insert(0, arguments.length);\n\t\treturn r;\n\t},\n\tpop: function() {\n\t\tvar r = AP.pop.apply(this.$data, arguments);\n\t\tthis.$remove(this.$data.length, 1);\n\t\treturn r;\n\t},\n\tshift: function() {\n\t\tvar r = AP.shift.apply(this.$data, arguments);\n\t\tthis.$remove(0, 1);\n\t\treturn r;\n\t},\n\tsplice: function(start, deleteCount) {\n\t\tvar argsl = arguments.length;\n\t\tvar len = this.$data.length;\n\t\tvar r = AP.splice.apply(this.$data, arguments);\n\t\tif (argsl === 1) {\n\t\t\tthis.$remove(start, len-start);\n\t\t} else if (argsl === 2) {\n\t\t\tthis.$remove(start, deleteCount);\n\t\t} else { // some inserted items\n\t\t\tif (deleteCount) this.$remove(start, deleteCount);\n\t\t\tthis.$insert(start, argsl-2);\n\t\t}\n\t\treturn r;\n\t},\n\tsort: function(cmp) {\n\t\tthis.$data.sort(cmp);\n\t\tthis.$redraw();\n\t\treturn this.$data;\n\t},\n\treverse: function() {\n\t\tthis.$data.reverse();\n\t\tthis.$redraw();\n\t\treturn this.$data;\n\t},\n\tget: function(i) {\n\t\treturn this.$data[i];\n\t},\n\tslice: function() {\n\t\treturn AP.slice.apply(this.$data, arguments);\n\t},\n\tforEach: function(cb, thisArg) {\n\t\tthis.$data.forEach(cb, thisArg);\n\t},\n\tmap: function(cb, thisArg) {\n\t\treturn this.$data.map(cb, thisArg);\n\t},\n\tfilter: function(cb, thisArg) {\n\t\treturn this.$data.filter(cb, thisArg);\n\t},\n\tfind: function(cb, thisArg) {\n\t\treturn this.$data.find(cb, thisArg);\n\t},\n\tfindIndex: function(cb, thisArg) {\n\t\treturn this.$data.findIndex(cb, thisArg);\n\t},\n\treduce: function(cb, initialValue) {\n\t\treturn this.$data.reduce(cb, initialValue);\n\t},\n\treduceRight: function(cb, initialValue) {\n\t\treturn this.$data.reduceRight(cb, initialValue);\n\t},\n\tindexOf: function(elem, from) {\n\t\treturn this.$data.indexOf(elem, from || 0);\n\t},\n\tlastIndexOf: function(elem, from) {\n\t\treturn this.$data.lastIndexOf(elem, from || this.$data.length-1);\n\t},\n\t//TODO add some, every, ...\n}\nObject.defineProperty(ListProto, 'length', {get:function() {return this.$data.length}});\n\nexport default function List(data) {\n\tthis.ops = []; // update operations queue\n\tthis.lfs = null; // the list fragment\n\tthis.$data = data || []; // the backed data\n}\nList.prototype = ListProto;\n","import window, {document} from '@qutejs/window';\nimport ERR from './error.js';\nimport { stopEvent, chainFnAfter, closestVM, kebabToCamel } from './utils.js';\n\nimport Rendering from './rendering.js';\nimport List from './list.js';\nimport UpdateQueue from './update.js';\nimport Context from './context.js';\nimport {createListeners, SetProp, SetVMAttrs, SetClass, SetStyle, SetToggle, SetDisplay} from './binding.js';\nimport Emitter from './emit.js';\n\n\nfunction isEnumerable(key) {\n\treturn key.charCodeAt(0) !== 95; // keys starting with _ are not enumerable\n}\n\nfunction defProp(key) {\n\treturn {\n\t\tget: function() {\n\t\t\treturn this.$data[key];\n\t\t},\n\t\tset: function(value) {\n\t\t\tvar old = this.$data[key];\n\t\t\tif (old !== value) {\n\t\t\t\tthis.$data[key] = value;\n\t\t\t\tvar watcher = this.$el && this.$watch && this.$watch[key]; // if not connected whatchers are not enabled\n\t\t\t\t// avoid updating if watcher return false\n\t\t\t\tif (watcher && watcher.call(this, value, old) === false) return;\n\t\t\t\tthis.update(key);\n\t\t\t}\n\t\t},\n\t\tenumerable: isEnumerable(key) // keys starting with _ are not enumerable\n\t}\n}\n\nfunction listProp(key) {\n\treturn {\n\t\tget: function() {\n\t\t\treturn this.$data[key];\n\t\t},\n\t\tset: function(value) {\n\t\t\tvar old = this.$data[key];\n\t\t\tif (old !== value) {\n\t\t\t\tif (!value) { // remove list content\n\t\t\t\t\tthis.$data[key].clear();\n\t\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\t\tthis.$data[key].replace(value);\n\t\t\t\t} else if (value instanceof List) {\n\t\t\t\t\t//TODO should we copy the data?\n\t\t\t\t\tif (old) old.$disconnect();\n\t\t\t\t\tthis.$data[key] = value;\n\t\t\t\t} else {\n\t\t\t\t\tERR(31, value);\n\t\t\t\t}\n\t\t\t\tvar watcher = this.$watch && this.$watch[key];\n\t\t\t\t// avoid updating if watcher return false\n\t\t\t\tif (watcher && watcher.call(this, value, old) === false) return;\n\t\t\t\tthis.update(key);\n\t\t\t}\n\t\t},\n\t\tenumerable: isEnumerable(key) // keys starting with _ are not enumerable\n\t}\n}\n\nfunction ViewModel(ctx, attrs) {\n\tvar prop = {};\n\t// the attributes set on vm tag which are not declared as props\n\tprop.value = {};\n\tObject.defineProperty(this, '$attrs', prop);\n\t// the app context if any\n\tprop.value = ctx instanceof Context ? ctx : new Context(ctx);\n\tObject.defineProperty(this, '$ctx', prop);\n\t// the listeners registered on the vm tag\n\tprop.value = null;\n\tprop.writable = true;\n\t// the associated rendering context\n\tObject.defineProperty(this, '$r', prop);\n\t// listeners injected through tag attributes (e.g. @click)\n\tObject.defineProperty(this, '$listeners', prop);\n\t// the slots injected by the caller\n\tObject.defineProperty(this, '$slots', prop);\n\t// the view root element\n\tObject.defineProperty(this, '$el', prop);\n\t// chained cleanup functions if any was registered\n\tObject.defineProperty(this, '$clean', prop);\n\t// States: 0 - initial, 1 - connected, 2 - updating\n\tprop.value = 0;\n\tObject.defineProperty(this, '$st', prop); // state: 0 - default, 1 updating , 2 frozen\n\n\tvar data = this.init(ctx) || {};\n\tprop.value = data;\n\tObject.defineProperty(this, '$data', prop);\n\tif (data) {\n\t\tfor (var key in data) {\n\t\t\tObject.defineProperty(this, key, data[key] instanceof List ? listProp(key) : defProp(key));\n\t\t}\n\t}\n\n\tif (!this.render) ERR(32);\n\n\t// initialize data model from attributes if any - this will not trigger an update\n\tif (attrs) {\n\t\tvar $data = this.$data;\n\t\tvar $attrs = this.$attrs;\n\t\tObject.keys(attrs).forEach(function(key) {\n\t\t\tvar value = attrs[key];\n\t\t\tif (key in $data) { // a declared property\n\t\t\t\t$data[key] = value;\n\t\t\t} else {\n\t\t\t\tvar camelKey = kebabToCamel(key);\n\t\t\t\tif (camelKey !== key && camelKey in $data) {\n\t\t\t\t\t$data[camelKey] = value;\n\t\t\t\t} else if ($attrs[key] !== value) {\n\t\t\t\t\t// attributes are not camelized\n\t\t\t\t\t$attrs[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nViewModel.prototype = {\n\t__VM__:true,\n\ttoString: function() {\n\t\treturn 'ViewModel <'+this.$tag+'/>';\n\t},\n\t// set an attribute value (can be either a free property (i.e $attrs[key]) or managed property (i.e. $data[key]))\n\t$set: function(key, value) {\n\t\tif (key in this.$data) { // a declared property\n\t\t\tthis[key] = value;\n\t\t} else {\n\t\t\tvar camelKey = kebabToCamel(key);\n\t\t\tif (camelKey !== key && camelKey in this.$data) {\n\t\t\t\tthis[camelKey] = value;\n\t\t\t} else if (this.$attrs[key] !== value) {\n\t\t\t\t// attributes are not camelized\n\t\t\t\tthis.$attrs[key] = value;\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t},\n\t// subscribe to the given channel name - for use on root VMs\n\tlisten: function(channelName) {\n\t\tif (!this.$channel) ERR(39, this.$tag);\n\t\t// add an init function\n\t\tthis.$init = chainFnAfter(function(thisObj) {\n\t\t\tthisObj.subscribe(channelName, thisObj.$channel);\n\t\t}, this.$init);\n\t\treturn this;\n\t},\n\t//TODO use setup in listen and $on\n\tsetup: function(setupFn) {\n\t\tthis.$init = chainFnAfter(setupFn, this.$init);\n\t\treturn this;\n\t},\n\tcleanup: function(fn) { // register a cleanup function when component is disconnected\n\t\tthis.$clean = chainFnAfter(fn, this.$clean);\n\t\treturn this;\n\t},\n\t$parent: function() {\n\t\tif (!this.$el) ERR(35);\n\t\treturn closestVM(this.$el.parentNode);\n\t},\n\t$root: function() {\n\t\tvar parent = this.$parent();\n\t\treturn parent ? parent.$root() : this;\n\t},\n\t$connect: function() {\n\t\tif (this.$st & 1) return; // ignore\n\t\tthis.$st |= 1; // set connected flag\n\t\t// $init may be defined by the prototype to do automatic setup when connected\n\t\t// (e.g. automatic installed listeners defined though VM definitioan 'on' property)\n\t\tif (this.$init) {\n\t\t\tthis.$init(this);\n\t\t}\n\t\tif (this.$listeners) {\n\t\t\tvar listeners = this.$listeners;\n\t\t\tfor (var key in listeners) {\n\t\t\t\tthis.$on(key, listeners[key]);\n\t\t\t}\n\t\t}\n\t\t// connect children vms\n\t\tthis.$r.$connect();\n\t\t// call the connected callback\n\t\tthis.connected && this.connected();\n\t\treturn this;\n\t},\n\t$disconnect: function() {\n\t\tif (!(this.$st & 1)) return; // ignore\n\t\tthis.$st ^= 1; // clear connected flag\n\t\tif (this.$clean) {\n\t\t\tthis.$clean();\n\t\t\tthis.$clean = null;\n\t\t}\n\t\tthis.$r.$disconnect(); // disconnect children vms\n\t\tthis.disconnected && this.disconnected();\n\t},\n\t// initialize a vm from tag raw data\n\t$load: function(rendering, xattrs, slots) {\n\t\tvar bindings = null;\n\t\tvar parentVM = rendering.vm;\n\t\tthis.$slots = slots;\n\t\tif (xattrs) {\n\t\t\tfor (var key in xattrs) {\n\t\t\t\tvar val = xattrs[key];\n\t\t\t\tif (key.charCodeAt(0) === 36) { // $ - extended attribute\n\t\t\t\t\tif (key === '$on') {\n\t\t\t\t\t\t//TODO we should make a copy of val since it is modified by createListeners!!!\n\t\t\t\t\t\tthis.$listeners = createListeners(parentVM, val); // use parent vm when creating listeners\n\t\t\t\t\t} else if (key === '$attrs') { // we must not delete keys from xattrs since it can break when vm is loaded by a dynamic component\n\t\t\t\t\t\t//TODO DO WE NEED to add an update fn? x-attrs are static\n\t\t\t\t\t\trendering.up(SetVMAttrs(this, parentVM, val))();\n\t\t\t\t\t} else if (key === '$class') {\n\t\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\t\tbindings.push(SetClass, val);\n\t\t\t\t\t} else if (key === '$style') {\n\t\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\t\tbindings.push(SetStyle, val);\n\t\t\t\t\t} else if (key === '$show') {\n\t\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\t\tbindings.push(SetDisplay, val);\n\t\t\t\t\t} else if (key === '$toggle') {\n\t\t\t\t\t\tif (!bindings) bindings = [];\n\t\t\t\t\t\tbindings.push(SetToggle, val);\n\t\t\t\t\t} else if (key === '$channel') {\n\t\t\t\t\t\tthis.listen(val);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tERR(26, key);\n\t\t\t\t\t}\n\t\t\t\t} else if (typeof val === 'function') { // a dynamic binding\n\t\t\t\t\trendering.up(SetProp(this, parentVM, key, val))();\n\t\t\t\t} else { // static binding\n\t\t\t\t\tthis.$set(key, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn bindings;\n\t},\n\t$create: function(parentRendering, xattrs, slots) {\n\t\t// load definition\n\t\tvar bindings = parentRendering && this.$load(parentRendering, xattrs, slots);\n\t\tvar rendering = new Rendering(this);\n\t\t// must never return null - for non rendering components like popups we return a comment\n\t\tvar el = this.render(rendering) || document.createComment('<'+this.$tag+'/>');\n\t\tthis.$r = rendering;\n\t\tel.__qute__ = this;\n\t\tthis.$el = el;\n\t\tif (bindings) for (var i=0,l=bindings.length; i<l; i+=2) {\n\t\t\tvar binding = bindings[i];\n\t\t\tvar up = bindings[i](el, parentRendering.vm, bindings[i+1]);\n\t\t\tparentRendering.up(up)();\n\t\t}\n\t\tthis.created && this.created(el);\n\t\t// this can trigger a connect if tree is already connected (for example when inserting a comp in a connected list)\n\t\tparentRendering && parentRendering.$push(this);\n\t\treturn el;\n\t},\n\n\t// manual mount (only roots must be moutned this way)\n\tmount: function(elOrId, insertBefore) {\n\t\tif (this.$el) ERR(33); //TODO should check if connected and if not root\n\t\tvar target;\n\t\tif (elOrId) {\n\t\t\ttarget = typeof elOrId === 'string' ? document.getElementById(elOrId) : elOrId;\n\t\t} else {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tvar el = this.$create();\n\t\tif (insertBefore) {\n\t\t\ttarget.parentNode.insertBefore(el, target);\n\t\t} else {\n\t\t\ttarget.appendChild(el);\n\t\t}\n\t\tthis.$connect();\n\t\t// announce the tree was attached to the DOM\n\t\treturn this;\n\t},\n\t// only manually mounted vms can be unmounted\n\tunmount: function() {\n\t\t// a child vm?\n\t\t//if (this.$p) ERR();\n\t\tif (!this.$el) ERR(34); // TODO check if root and mounted\n\t\tthis.$disconnect();\n\t\tthis.$el.parentNode.removeChild(this.$el);\n\t},\n\t$update: function(key) {\n\t\tif (this.$el) { // only if connected\n\t\t\tthis.$r.$update();\n\t\t}\n\t},\n\tupdate: function(key) {\n\t\tif (this.$st === 1) { // only if connected and not already scheduled to update\n\t\t\tthis.$st |= 2; // set updating flag\n\t\t\tvar self = this;\n\t\t\tUpdateQueue.push(function() {\n\t\t\t\tself.$update(key);\n\t\t\t\tself.$st ^= 2; // remove updating flag\n\t\t\t});\n\t\t}\n\t},\n\t$on: function(type/*, selector, cb*/) {\n\t\tif (!this.$el) ERR(34);\n\t\t//if (!this.$clean) this.$clean = [];\n\t\tvar selector, cb;\n\t\tif (arguments.length === 3) {\n\t\t\tselector = arguments[1];\n\t\t\tcb = arguments[2];\n\t\t\tif (!cb) {\n\t\t\t\tcb = selector;\n\t\t\t\tselector = null;\n\t\t\t\tif (!cb) throw new Error('on function requires a callback argument');\n\t\t\t}\n\t\t} else if (arguments.length === 2) {\n\t\t\tcb = arguments[1];\n\t\t} else {\n\t\t\tthrow new Error('on function takes 2 or 3 arguments: eventType[, seelctor], callback');\n\t\t}\n\t\tvar self = this;\n\t\tvar wrapper = function(e) {\n\t\t\tif (!selector || e.target.matches(selector)) {\n\t\t\t\tif (cb.call(self, e) === false) {\n\t\t\t\t\tstopEvent(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.$el.addEventListener(type, wrapper);\n\t\tthis.cleanup(function() {\n\t\t\tself.$el.removeEventListener(type, wrapper);\n\t\t});\n\t\t//this.$clean.push(type, wrapper);\n\t},\n\temit: Emitter.emit,\n\temitAsync: Emitter.emitAsync,\n\t// -------- ctx event bus -------------\n\tpost: function(topic, msg, data) {\n\t\tthis.$ctx.post(topic, msg, data);\n\t},\n\tpostAsync: function(topic, msg, data) {\n\t\tthis.$ctx.postAsync(topic, msg, data);\n\t},\n\t// subscribe and register cleanup to remove subscription at disconnect\n\tsubscribe: function(name, listenerFn) {\n\t\tvar ctx = this.$ctx;\n\t\tctx.subscribe(name, listenerFn.bind(this));\n\t\tthis.cleanup(function() {\n\t\t\tctx.unsubscribe(name, listenerFn);\n\t\t});\n\t\treturn this;\n\t},\n\tsubscribeOnce: function(topic, event, listenerFn) {\n\t\tvar ctx = this.$ctx;\n\t\tvar onceSubscription = ctx.subscribeOnce(topic, event, listenerFn.bind(this));\n\t\tthis.cleanup(function() {\n\t\t\tctx.unsubscribe(topic, onceSubscription);\n\t\t});\n\t\treturn this;\n\t},\n\ttoHTML: function() {\n\t\treturn this.$el && this.$el.outerHTML;\n\t},\n\t// ---------------------------------------------\n\tinit: function() {} // do nothing\n}\n\nexport default ViewModel;\n","import window from '@qutejs/window';\n\nimport ERR from './error.js';\nimport { chainFnAfter, closestVM } from './utils.js';\n\nimport UpdateQueue from './update.js';\nimport Rendering from './rendering.js';\nimport ViewModel from './vm.js';\nimport Context from './context.js';\nimport List from './list.js';\nimport { createListener } from './binding.js';\nimport { registerTag, registerVM, getTag, getVM, getVMOrTag, snapshotRegistry, restoreRegistry } from './registry.js';\n\n/**\n * We cannot use Object.assign since getter are lost. So we copy the prop def itself\n */\nfunction assignPropDefs(dst, src) {\n\tvar keys = Object.keys(src);\n    for(var i=0,l=keys.length; i<l; i++) {\n      var key = keys[i];\n      Object.defineProperty(dst, key, Object.getOwnPropertyDescriptor(src, key));\n    }\n    return dst;\n}\n\nfunction Qute(tag, def, BaseVm) {\n\tif (!tag) ERR(5);\n\n\tfunction ViewModelImpl(ctx, attrs) {\n\t\tViewModel.call(this, ctx, attrs);\n\t}\n\n\tvar VMType, VMProto;\n\tif (typeof def === 'function') {\n\t\tif (def.prototype instanceof ViewModel)\t{\n\t\t\t// VM is defined as a class\n\t\t\tVMType = def;\n\t\t\tVMProto = VMType.prototype;\n\t\t} else {\n\t\t\t// a rendering function - we simply register the rendering fucntion for the given tag\n\t\t\treturn registerTag(tag, def);\n\t\t}\n\t} else { // VM definition object\n\t\tif (!BaseVm) BaseVm = ViewModel;\n\t\tVMProto = Object.create(BaseVm.prototype, {\n\t\t\tconstructor: {value:ViewModelImpl},\n\t\t});\n\t\tif (def) assignPropDefs(VMProto, def); // this is preserving getters\n\t\tVMProto.$super = BaseVm.prototype; // to be able to override methods and call the super method if needed\n\t\tViewModelImpl.prototype = VMProto;\n\n\t\tVMType = ViewModelImpl;\n\t}\n\n\t// add the rendering method of the tag if no one was provided\n\tif (!VMProto.render) {\n\t\tVMProto.render = Qute.template(tag);\n\t\tif (!VMProto.render) {\n\t\t\tERR(36, tag);\n\t\t}\n\t}\n\t// add the tag meta property\n\tVMProto.$tag = tag;\n\n\tregisterVM(tag, VMType);\n\n\tVMType.watch = function(prop, fn) {\n\t\tif (!VMProto.$watch) Object.defineProperty(VMProto, '$watch', {value:{}});\n\t\tVMProto.$watch[prop] = fn;\n\t\treturn VMType;\n\t}\n\tVMType.on = function(key, selector, cb) {\n\t\tVMProto.$init = chainFnAfter(function(thisObj) {\n\t\t\tthisObj.$on(key, selector, cb);\n\t\t}, VMProto.$init);\n\t\treturn VMType;\n\t}\n\tVMType.channel = function(listenFn) {\n\t\tVMProto.$channel = listenFn;\n\t\treturn this;\n\t}\n\n\treturn VMType;\n}\n\nQute.List = List;\nQute.ViewModel = ViewModel;\n\n// link a viewmodel to a template. Usefull for classes where defining prototype methods is not part of the class syntax\nQute.link = function(VMType, renderFn) {\n\tVMType.prototype.render = renderFn;\n}\n\n\nvar QUTE_STYLE=null;\nQute.css = function(css) {\n\tvar doc = window.document;\n\tif (!QUTE_STYLE) {\n\t\tvar style = doc.getElementById('--qute-inline-styles');\n\t\tif (!style) {\n\t\t\tstyle = doc.createElement('STYLE');\n\t\t\tstyle.id = '--qute-inline-styles';\n\t\t\tstyle.type = 'text/css';\n\t\t\tstyle.textContent = \"\\n\";\n\t\t\tdoc.head.insertBefore(style, doc.head.firstChild);\n\t\t}\n\t\tQUTE_STYLE = style;\n\t}\n\tQUTE_STYLE.textContent += css;\n}\n\nQute.converters = {};\nContext.Qute = Qute; // we need this to access globals defined in Qute like converters\nQute.Context = Context;\nQute.UpdateQueue = UpdateQueue;\nQute.Rendering = Rendering;\n// render a functional template given its tag name and a model\nQute.render = function(xtagName, model) {\n\treturn getTag(xtagName)(new Rendering(model));\n}\n\nQute.register = registerTag;\nQute.template = getTag;\nQute.snapshotRegistry = snapshotRegistry;\nQute.restoreRegistry = restoreRegistry;\nQute.vm = getVM;\nQute.vmOrTemplate = getVMOrTag;\n\nQute.runAfter = function(cb) { UpdateQueue.runAfter(cb); }\nQute.closest = closestVM;\nQute.ERR = ERR;\n\n\nexport default Qute;\n\n"],"names":["window","document","kebabToCamel"],"mappings":"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"}